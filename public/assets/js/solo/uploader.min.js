!function(e){"use strict";"function"==typeof define&&define.amd?define(["jquery"],e):"undefined"!=typeof exports?module.exports=e(require("jquery")):e(jQuery)}((function($){"use strict";$.fn.fileuploader=function(q){return this.each((function(t,r){var s=$(r),p=null,o=null,l=null,sl=[],n=$.extend(!0,{},$.fn.fileuploader.defaults,q),f={init:function(){return s.closest(".fileuploader").length||s.wrap('<div class="fileuploader"></div>'),p=s.closest(".fileuploader"),f.set("language"),f.set("attrOpts"),f.isSupported()?(!n.beforeRender||!$.isFunction(n.beforeRender)||!1!==n.beforeRender(p,s))&&(f.redesign(),n.files&&f.files.append(n.files),f.rendered=!0,n.afterRender&&$.isFunction(n.afterRender)&&n.afterRender(l,p,o,s),f.disabled||f.bindUnbindEvents(!0),s.closest("form").on("reset",f.reset),void(f._itFl.length||f.reset())):(n.onSupportError&&$.isFunction(n.onSupportError)&&n.onSupportError(p,s),!1)},bindUnbindEvents:function(e){e&&f.bindUnbindEvents(!1),s[e?"on":"off"]("focus blur change",f.onEvent),n.changeInput&&o!==s&&o[e?"on":"off"]("click",f.clickHandler),n.dragDrop&&n.dragDrop.container.length&&(n.dragDrop.container[e?"on":"off"]("drag dragstart dragend dragover dragenter dragleave drop",(function(e){e.preventDefault()})),n.dragDrop.container[e?"on":"off"]("drop",f.dragDrop.onDrop),n.dragDrop.container[e?"on":"off"]("dragover",f.dragDrop.onDragEnter),n.dragDrop.container[e?"on":"off"]("dragleave",f.dragDrop.onDragLeave)),f.isUploadMode()&&n.clipboardPaste&&$(window)[e?"on":"off"]("paste",f.clipboard.paste),n.sorter&&n.thumbnails&&n.thumbnails._selectors.sorter&&f.sorter[e?"init":"destroy"]()},redesign:function(){if(o=s,n.theme&&p.addClass("fileuploader-theme-"+n.theme),n.changeInput){switch((typeof n.changeInput).toLowerCase()){case"boolean":o=$('<div class="fileuploader-input"><div class="fileuploader-input-caption"><span>'+f._assets.textParse(n.captions.feedback)+'</span></div><button type="button" class="fileuploader-input-button"><span>'+f._assets.textParse(n.captions.button)+"</span></button></div>");break;case"string":" "!=n.changeInput&&(o=$(f._assets.textParse(n.changeInput,n)));break;case"object":o=$(n.changeInput);break;case"function":o=$(n.changeInput(s,p,n,f._assets.textParse))}s.after(o),s.css({position:"absolute","z-index":"-9999",height:"0",width:"0",padding:"0",margin:"0","line-height":"0",outline:"0",border:"0",opacity:"0"})}n.thumbnails&&f.thumbnails.create(),n.dragDrop&&(n.dragDrop="object"!=typeof n.dragDrop?{container:null}:n.dragDrop,n.dragDrop.container=n.dragDrop.container?$(n.dragDrop.container):o)},clickHandler:function(e){e.preventDefault(),f.clipboard._timer?f.clipboard.clean():s.click()},onEvent:function(e){switch(e.type){case"focus":p&&p.addClass("fileuploader-focused");break;case"blur":p&&p.removeClass("fileuploader-focused");break;case"change":f.onChange.call(this)}n.listeners&&$.isFunction(n.listeners[e.type])&&n.listeners[e.type].call(s,p)},set:function(e,t){switch(e){case"attrOpts":for(var i=["limit","maxSize","fileMaxSize","extensions","changeInput","theme","addMore","listInput","files"],a=0;a<i.length;a++){var r="data-fileuploader-"+i[a];if(f._assets.hasAttr(r))switch(i[a]){case"changeInput":case"addMore":case"listInput":n[i[a]]=["true","false"].indexOf(s.attr(r))>-1?"true"==s.attr(r):s.attr(r);break;case"extensions":n[i[a]]=s.attr(r).replace(/ /g,"").split(",");break;case"files":n[i[a]]=JSON.parse(s.attr(r));break;default:n[i[a]]=s.attr(r)}s.removeAttr(r)}null==s.attr("disabled")&&null==s.attr("readonly")&&0!==n.limit||(f.disabled=!0),(!n.limit||n.limit&&n.limit>=2)&&(s.attr("multiple","multiple"),n.inputNameBrackets&&"[]"!=s.attr("name").slice(-2)&&s.attr("name",s.attr("name")+"[]")),!0===n.listInput&&(n.listInput=$('<input type="hidden" name="fileuploader-list-'+s.attr("name").replace("[]","").split("[").pop().replace("]","")+'">').insertBefore(s)),"string"==typeof n.listInput&&0==$(n.listInput).length&&(n.listInput=$('<input type="hidden" name="'+n.listInput+'">').insertBefore(s)),f.set("disabled",f.disabled),!n.fileMaxSize&&n.maxSize&&(n.fileMaxSize=n.maxSize);break;case"language":var l=$.fn.fileuploader.languages;"string"==typeof n.captions&&(n.captions in l?n.captions=l[n.captions]:n.captions=$.extend(!0,{},$.fn.fileuploader.defaults.captions));break;case"disabled":f.disabled=t,p[f.disabled?"addClass":"removeClass"]("fileuploader-disabled"),s[f.disabled?"attr":"removeAttr"]("disabled","disabled"),f.rendered&&f.bindUnbindEvents(!t);break;case"feedback":t||(t=f._assets.textParse(f._itFl.length>0?n.captions.feedback2:n.captions.feedback,{length:f._itFl.length})),$(!o.is(":file"))&&o.find(".fileuploader-input-caption span").html(t);break;case"input":var d=f._assets.copyAllAttributes($('<input type="file">'),s,!0);f.bindUnbindEvents(!1),s.after(s=d).remove(),f.bindUnbindEvents(!0);break;case"prevInput":sl.length>0&&(f.bindUnbindEvents(!1),sl[t].remove(),sl.splice(t,1),s=sl[sl.length-1],f.bindUnbindEvents(!0));break;case"nextInput":d=f._assets.copyAllAttributes($('<input type="file">'),s);f.bindUnbindEvents(!1),sl.length>0&&0==sl[sl.length-1].get(0).files.length?s=sl[sl.length-1]:(-1==sl.indexOf(s)&&sl.push(s),sl.push(d),s.after(s=d)),f.bindUnbindEvents(!0);break;case"listInput":n.listInput&&n.listInput.val(f.files.list(!0,null,!1,t))}},onChange:function(e,t){var i=s.get(0).files;if(t){if(!t.length)return f.set("input",""),f.files.clear(),!1;i=t}if(f.clipboard._timer&&f.clipboard.clean(),!f.isDefaultMode()||(f.reset(),0!=i.length)){if(n.beforeSelect&&$.isFunction(n.beforeSelect)&&0==n.beforeSelect(i,l,p,o,s))return!1;for(var a=0,r=0;r<i.length;r++){var d=i[r],u=f._itFl[f.files.add(d,"choosed")],c=f.files.check(u,i,0==r);if(!0===c)n.thumbnails&&f.thumbnails.item(u),f.isUploadMode()&&f.upload.prepare(u),n.onSelect&&$.isFunction(n.onSelect)&&n.onSelect(u,l,p,o,s),a++;else if(f.files.remove(u,!0),c[2]||(f.isDefaultMode()&&(f.set("input",""),f.reset(),c[3]=!0),c[1]&&f._assets.dialogs.alert(c[1],u,l,p,o,s)),c[3])break}f.isUploadMode()&&a>0&&f.set("input",""),f.set("feedback",null),f.isAddMoreMode()&&a>0&&f.set("nextInput"),f.set("listInput",null),n.afterSelect&&$.isFunction(n.afterSelect)&&n.afterSelect(l,p,o,s)}},thumbnails:{create:function(){null!=n.thumbnails.beforeShow&&$.isFunction(n.thumbnails.beforeShow)&&n.thumbnails.beforeShow(p,o,s);var e=$(f._assets.textParse(n.thumbnails.box)).appendTo(n.thumbnails.boxAppendTo?n.thumbnails.boxAppendTo:p);l=e.is(n.thumbnails._selectors.list)?e:e.find(n.thumbnails._selectors.list),n.thumbnails._selectors.popup_open&&l.on("click",n.thumbnails._selectors.popup_open,(function(e){e.preventDefault();var t=$(this).closest(n.thumbnails._selectors.item),o=f.files.find(t);o&&o.popup&&o.html.hasClass("file-has-popup")&&f.thumbnails.popup(o)})),f.isUploadMode()&&n.thumbnails._selectors.start&&l.on("click",n.thumbnails._selectors.start,(function(e){if(e.preventDefault(),f.locked)return!1;var t=$(this).closest(n.thumbnails._selectors.item),o=f.files.find(t);o&&f.upload.send(o,!0)})),f.isUploadMode()&&n.thumbnails._selectors.retry&&l.on("click",n.thumbnails._selectors.retry,(function(e){if(e.preventDefault(),f.locked)return!1;var t=$(this).closest(n.thumbnails._selectors.item),o=f.files.find(t);o&&f.upload.retry(o)})),n.thumbnails._selectors.rotate&&l.on("click",n.thumbnails._selectors.rotate,(function(e){if(e.preventDefault(),f.locked)return!1;var t=$(this).closest(n.thumbnails._selectors.item),o=f.files.find(t);o&&o.editor&&(o.editor.rotate(),o.editor.save())})),n.thumbnails._selectors.remove&&l.on("click",n.thumbnails._selectors.remove,(function(e){if(e.preventDefault(),f.locked)return!1;var t=$(this).closest(n.thumbnails._selectors.item),o=f.files.find(t),i=function(e){f.files.remove(o)};o&&(o.upload&&"successful"!=o.upload.status?f.upload.cancel(o):n.thumbnails.removeConfirmation&&!o.choosed?f._assets.dialogs.confirm(f._assets.textParse(n.captions.removeConfirmation,o),i):i())}))},clear:function(){l&&l.html("")},item:function(e,t){e.icon=f.thumbnails.generateFileIcon(e.format,e.extension),e.image='<div class="fileuploader-item-image"></div>',e.progressBar=f.isUploadMode()?'<div class="fileuploader-progressbar"><div class="bar"></div></div>':"",e.html=$(f._assets.textParse(e.appended&&n.thumbnails.item2?n.thumbnails.item2:n.thumbnails.item,e)),e.progressBar=e.html.find(".fileuploader-progressbar"),e.html.addClass("file-type-"+(e.format?e.format:"no")+" file-ext-"+(e.extension?e.extension:"no")),t?t.replaceWith(e.html):e.html[n.thumbnails.itemPrepend?"prependTo":"appendTo"](l),n.thumbnails.popup&&!1!==e.data.popup&&(e.html.addClass("file-has-popup"),e.popup={open:function(){f.thumbnails.popup(e)}}),f.thumbnails.renderThumbnail(e),e.renderThumbnail=function(t){t&&e.popup&&e.popup.close&&(e.popup.close(),e.popup={open:e.popup.open}),f.thumbnails.renderThumbnail(e,!0,t)},null!=n.thumbnails.onItemShow&&$.isFunction(n.thumbnails.onItemShow)&&n.thumbnails.onItemShow(e,l,p,o,s)},generateFileIcon:function(e,t){var o='<div style="${style}" class="fileuploader-item-icon${class}"><i>'+(t||"")+"</i></div>",i=f._assets.textToColor(t);i&&(f._assets.isBrightColor(i)&&(o=o.replace("${class}"," is-bright-color")),o=o.replace("${style}","background-color: "+i));return o.replace("${style}","").replace("${class}","")},renderThumbnail:function(e,t,i){var a=e.html.find(".fileuploader-item-image"),r=e.data&&(e.data.readerSkip||!1===e.data.thumbnail),d=function(t){var i=$(t);a.removeClass("fileuploader-no-thumbnail fileuploader-loading").html(i),e.html.hasClass("file-will-popup")&&e.html.removeClass("file-will-popup").addClass("file-has-popup"),i.is("img")&&i.attr("draggable","false").on("load error",(function(e){"error"==e.type&&u()})),null!=n.thumbnails.onImageLoaded&&$.isFunction(n.thumbnails.onImageLoaded)&&n.thumbnails.onImageLoaded(e,l,p,o,s)},u=function(){a.addClass("fileuploader-no-thumbnail"),a.removeClass("fileuploader-loading").html(e.icon),e.html.hasClass("file-will-popup")&&e.html.removeClass("file-will-popup").addClass("file-has-popup"),null!=n.thumbnails.onImageLoaded&&$.isFunction(n.thumbnails.onImageLoaded)&&n.thumbnails.onImageLoaded(e,l,p,o,s)},c=function(){var t=0;if(e&&f._pfrL.indexOf(e)>-1)for(f._pfrL.splice(f._pfrL.indexOf(e),1);t<f._pfrL.length;){if(f._itFl.indexOf(f._pfrL[t])>-1){setTimeout((function(){f.thumbnails.renderThumbnail(f._pfrL[t],!0)}),"image"==e.format&&e.size/1e6>1.8?200:0);break}f._pfrL.splice(t,1),t++}};if(a.length){if(e.image=a.html("").addClass("fileuploader-loading"),(["image","video","audio","astext"].indexOf(e.format)>-1||e.data.thumbnail)&&f.isFileReaderSupported()&&!r&&(e.appended||n.thumbnails.startImageRenderer||t)){if(e.html.hasClass("file-has-popup")&&e.html.removeClass("file-has-popup").addClass("file-will-popup"),n.thumbnails.synchronImages&&(-1==f._pfrL.indexOf(e)&&!t&&f._pfrL.push(e),f._pfrL.length>1&&!t))return;var h=function(t,o){var i=t&&t.nodeName&&"img"==t.nodeName.toLowerCase(),r=i?t.src:t,l=null,s=function(){if(n.thumbnails.canvasImage){var e=document.createElement("canvas");f.editor.resize(this,e,n.thumbnails.canvasImage.width?n.thumbnails.canvasImage.width:a.width(),n.thumbnails.canvasImage.height?n.thumbnails.canvasImage.height:a.height(),!1,!0),f._assets.isBlankCanvas(e)?u():d(e)}else d(this);c()},p=function(){l=null,u(),c()};return t?o&&"image"==e.format&&e.reader.node?s.call(e.reader.node):i?s.call(t):((l=new Image).onload=s,l.onerror=p,e.data&&e.data.readerCrossOrigin&&l.setAttribute("crossOrigin",e.data.readerCrossOrigin),void(l.src=r)):p()};return"string"==typeof i||"object"==typeof i?h(i):f.files.read(e,(function(){h(e.reader.frame||(e.reader.node&&"img"==e.reader.node.nodeName.toLowerCase()?e.reader.src:null),!0)}),null,i,!0)}u()}else c()},popup:function(e,t){if(!f.locked&&n.thumbnails.popup&&n.thumbnails._selectors.popup){var i=$(n.thumbnails.popup.container),a=i.find(".fileuploader-popup"),r=function(){var r=e.popup.html||$(f._assets.textParse(n.thumbnails.popup.template,e)),d=e.popup.html!==r,u=function(t){var o=t.which||t.keyCode;27==o&&e.popup&&e.popup.close&&e.popup.close(),37!=o&&39!=o||!n.thumbnails.popup.arrows||e.popup.move(37==o?"prev":"next")};a.removeClass("loading"),a.children(n.thumbnails._selectors.popup).length&&($.each(f._itFl,(function(o,i){i!=e&&i.popup&&i.popup.close&&i.popup.close(t)})),a.find(n.thumbnails._selectors.popup).remove()),r.show().appendTo(a),e.popup.html=r,e.popup.isOpened=!0,e.popup.move=function(t){var o=f._itFl.indexOf(e),i=null,a=!1;if("prev"==(t=n.thumbnails.itemPrepend?"prev"==t?"next":"prev":t))for(var r=o;r>=0;r--){if((l=f._itFl[r])!=e&&l.popup&&l.html.hasClass("file-has-popup")){i=l;break}0!=r||i||a||!n.thumbnails.popup.loop||(r=f._itFl.length,a=!0)}else for(r=o;r<f._itFl.length;r++){var l;if((l=f._itFl[r])!=e&&l.popup&&l.html.hasClass("file-has-popup")){i=l;break}r+1!=f._itFl.length||i||a||!n.thumbnails.popup.loop||(r=-1,a=!0)}i&&f.thumbnails.popup(i,!0)},e.popup.close=function(t){e.popup.node&&e.popup.node.pause&&e.popup.node.pause(),$(window).off("keyup",u),i.css({overflow:"",width:""}),e.popup.editor&&e.popup.editor.cropper&&e.popup.editor.cropper.hide(),e.popup.zoomer&&e.popup.zoomer.hide(),e.popup.isOpened=!1,e.popup.html&&n.thumbnails.popup.onHide&&$.isFunction(n.thumbnails.popup.onHide)?n.thumbnails.popup.onHide(e,l,p,o,s):e.popup.html&&e.popup.html.remove(),t||a.fadeOut(400,(function(){a.remove()})),delete e.popup.close},e.popup.node?(d&&r.html(r.html().replace(/\$\{reader\.node\}/,'<div class="reader-node"></div>')).find(".reader-node").html(e.popup.node),e.popup.node.controls=!0,e.popup.node.currentTime=0,e.popup.node.play&&e.popup.node.play()):d&&r.find(".fileuploader-popup-node").html('<div class="reader-node"><div class="fileuploader-popup-file-icon file-type-'+e.format+" file-ext-"+e.extension+'">'+e.icon+"</div></div>"),$(window).on("keyup",u),i.css({overflow:"hidden",width:i.innerWidth()}),e.popup.html.find('[data-action="prev"], [data-action="next"]').removeAttr("style"),e.popup.html[1!=f._itFl.length&&n.thumbnails.popup.arrows?"addClass":"removeClass"]("fileuploader-popup-has-arrows"),n.thumbnails.popup.loop||(0==f._itFl.indexOf(e)&&e.popup.html.find('[data-action="prev"]').hide(),f._itFl.indexOf(e)==f._itFl.length-1&&e.popup.html.find('[data-action="next"]').hide()),d&&e.popup.zoomer&&(e.popup.zoomer=null),f.editor.zoomer(e),e.editor&&(e.popup.editor||(e.popup.editor={}),f.editor.rotate(e,e.editor.rotation||0,!0),e.popup.editor&&e.popup.editor.cropper&&(e.popup.editor.cropper.hide(!0),setTimeout((function(){f.editor.crop(e,e.editor.crop?$.extend({},e.editor.crop):e.popup.editor.cropper.setDefaultData())}),100))),e.popup.html.on("click",'[data-action="prev"]',(function(t){e.popup.move("prev")})).on("click",'[data-action="next"]',(function(t){e.popup.move("next")})).on("click",'[data-action="crop"]',(function(t){e.editor&&e.editor.cropper()})).on("click",'[data-action="rotate-cw"]',(function(t){e.editor&&e.editor.rotate()})).on("click",'[data-action="zoom-in"]',(function(t){e.popup.zoomer&&e.popup.zoomer.zoomIn()})).on("click",'[data-action="zoom-out"]',(function(t){e.popup.zoomer&&e.popup.zoomer.zoomOut()})),n.thumbnails.popup.onShow&&$.isFunction(n.thumbnails.popup.onShow)&&n.thumbnails.popup.onShow(e,l,p,o,s)};0==a.length&&(a=$('<div class="fileuploader-popup"></div>').appendTo(i)),a.fadeIn(400).addClass("loading").find(n.thumbnails._selectors.popup).fadeOut(150),(["image","video","audio","astext"].indexOf(e.format)>-1||["application/pdf"].indexOf(e.type)>-1)&&!e.popup.html?f.files.read(e,(function(){e.reader.node&&(e.popup.node=e.reader.node),"image"==e.format&&e.reader.node?(e.popup.node=e.reader.node.cloneNode(),e.popup.node.complete?r():(e.popup.node.src="",e.popup.node.onload=e.popup.node.onerror=r,e.popup.node.src=e.reader.node.src)):r()})):r()}}},editor:{rotate:function(e,t,o){if(!(e.popup&&e.popup.html&&$("html").find(e.popup.html).length)){var i=e.editor.rotation||0,n=t||i+90;return n>=360&&(n=0),e.popup.editor&&(e.popup.editor.rotation=n),e.editor.rotation=n}if(e.popup.node){if(e.popup.editor.isAnimating)return;e.popup.editor.isAnimating=!0;var a=e.popup.html.find(".fileuploader-popup-node").find(".reader-node"),r=a.find("> img"),l={rotation:i=e.popup.editor.rotation||0,scale:e.popup.editor.scale||1};e.popup.editor.cropper&&e.popup.editor.cropper.$template.hide(),e.popup.editor.rotation=o?t:i+90,e.popup.editor.scale=(a.height()/r[[90,270].indexOf(e.popup.editor.rotation)>-1?"width":"height"]()).toFixed(3),r.height()*e.popup.editor.scale>a.width()&&[90,270].indexOf(e.popup.editor.rotation)>-1&&(e.popup.editor.scale=a.height()/r.width()),e.popup.editor.scale>1&&(e.popup.editor.scale=1),$(l).stop().animate({rotation:e.popup.editor.rotation,scale:e.popup.editor.scale},{duration:o?2:300,easing:"swing",step:function(e,t){var o=r.css("-webkit-transform")||r.css("-moz-transform")||r.css("transform")||"none",i=0,n=1,a=t.prop;if("none"!==o){var l=o.split("(")[1].split(")")[0].split(","),s=l[0],p=l[1];i="rotation"==a?e:Math.round(Math.atan2(p,s)*(180/Math.PI)),n="scale"==a?e:Math.round(10*Math.sqrt(s*s+p*p))/10}r.css({"-webkit-transform":"rotate("+i+"deg) scale("+n+")","-moz-transform":"rotate("+i+"deg) scale("+n+")",transform:"rotate("+i+"deg) scale("+n+")"})},always:function(){delete e.popup.editor.isAnimating,e.popup.editor.cropper&&!o&&(e.popup.editor.cropper.setDefaultData(),e.popup.editor.cropper.init("rotation"))}}),e.popup.editor.rotation>=360&&(e.popup.editor.rotation=0),e.popup.editor.rotation!=e.editor.rotation&&(e.popup.editor.hasChanges=!0)}},crop:function(e,t){if(!(e.popup&&e.popup.html&&$("html").find(e.popup.html).length))return e.editor.crop=t||e.editor.crop;if(e.popup.node)if(e.popup.editor.cropper)t&&(e.popup.editor.cropper.crop=t),e.popup.editor.cropper.init(t);else{var o=e.popup.html.find(".fileuploader-popup-node .reader-node > img"),i=$('<div class="fileuploader-cropper"><div class="fileuploader-cropper-area"><div class="point point-a"></div><div class="point point-b"></div><div class="point point-c"></div><div class="point point-d"></div><div class="point point-e"></div><div class="point point-f"></div><div class="point point-g"></div><div class="point point-h"></div><div class="area-move"></div><div class="area-image"></div><div class="area-info"></div></div></div>'),a=i.find(".fileuploader-cropper-area");e.popup.editor.cropper={$imageEl:o,$template:i,$editor:a,isCropping:!1,crop:t||null,init:function(t){var o=e.popup.editor.cropper,a=o.$imageEl.position(),r=o.$imageEl[0].getBoundingClientRect().width,l=o.$imageEl[0].getBoundingClientRect().height,s=e.popup.editor.rotation&&[90,270].indexOf(e.popup.editor.rotation)>-1?e.popup.editor.scale:1;if(o.hide(),o.crop||o.setDefaultData(),0==r||0==l)return o.hide(!0);o.isCropping||(o.$imageEl.clone().appendTo(o.$template.find(".area-image")),o.$imageEl.parent().append(i)),o.$template.hide().css({left:a.left,top:a.top,width:r,height:l}).fadeIn(150),o.$editor.hide(),clearTimeout(o._editorAnimationTimeout),o._editorAnimationTimeout=setTimeout((function(){if(delete o._editorAnimationTimeout,o.$editor.fadeIn(250),e.editor.crop&&$.isPlainObject(t)&&(o.resize(),o.crop.left=o.crop.left*o.crop.cfWidth*s,o.crop.width=o.crop.width*o.crop.cfWidth*s,o.crop.top=o.crop.top*o.crop.cfHeight*s,o.crop.height=o.crop.height*o.crop.cfHeight*s),n.editor.cropper&&(n.editor.cropper.maxWidth||n.editor.cropper.maxHeight)&&(n.editor.cropper.maxWidth&&(o.crop.width=Math.min(n.editor.cropper.maxWidth*o.crop.cfWidth,o.crop.width)),n.editor.cropper.maxHeight&&(o.crop.height=Math.min(n.editor.cropper.maxHeight*o.crop.cfHeight,o.crop.height)),e.editor.crop&&"rotation"!=t||"resize"==t||(o.crop.left=(o.$template.width()-o.crop.width)/2,o.crop.top=(o.$template.height()-o.crop.height)/2)),(!e.editor.crop||"rotation"==t)&&n.editor.cropper&&n.editor.cropper.ratio&&"resize"!=t){var i=n.editor.cropper.ratio,a=f._assets.ratioToPx(o.crop.width,o.crop.height,i);a&&(o.crop.width=Math.min(o.crop.width,a[0]),o.crop.left=(o.$template.width()-o.crop.width)/2,o.crop.height=Math.min(o.crop.height,a[1]),o.crop.top=(o.$template.height()-o.crop.height)/2)}o.drawPlaceHolder(o.crop)}),400),n.editor.cropper&&n.editor.cropper.showGrid&&o.$editor.addClass("has-grid"),o.$imageEl.attr("draggable","false"),o.$template.on("mousedown touchstart",o.mousedown),$(window).on("resize",o.resize),o.isCropping=!0,e.popup.editor.hasChanges=!0},setDefaultData:function(){var t=e.popup.editor.cropper,o=t.$imageEl,i=(o.get(0).getBoundingClientRect(),o.width()),n=o.height(),a=e.popup.editor.rotation&&[90,270].indexOf(e.popup.editor.rotation)>-1,r=e.popup.editor.scale||1;return t.crop={left:0,top:0,width:a?n*r:i,height:a?i*r:n,cfWidth:i/e.reader.width,cfHeight:n/e.reader.height},null},hide:function(t){var o=e.popup.editor.cropper;t&&(o.$template.hide(),o.$editor.hide()),o.$imageEl.attr("draggable",""),o.$template.off("mousedown touchstart",o.mousedown),$(window).off("resize",o.resize)},resize:function(t){var o=e.popup.editor.cropper,i=o.$imageEl;i.width()>0&&(t?(o.$template.hide(),clearTimeout(o._resizeTimeout),o._resizeTimeout=setTimeout((function(){delete o._resizeTimeout;var t=i.width()/e.reader.width,n=i.height()/e.reader.height;o.crop.left=o.crop.left/o.crop.cfWidth*t,o.crop.width=o.crop.width/o.crop.cfWidth*t,o.crop.top=o.crop.top/o.crop.cfHeight*n,o.crop.height=o.crop.height/o.crop.cfHeight*n,o.crop.cfWidth=t,o.crop.cfHeight=n,o.init("resize")}),500)):(o.crop.cfWidth=i.width()/e.reader.width,o.crop.cfHeight=i.height()/e.reader.height))},drawPlaceHolder:function(t){var o=e.popup.editor.cropper,i=e.popup.editor.rotation||0,n=e.popup.editor.scale||1,a=[0,0];t&&(t=$.extend({},t),i&&(a=[180==i||270==i?-100:0,90==i||180==i?-100:0]),o.$editor.css(t),o.setAreaInfo(),o.$editor.find(".area-image img").removeAttr("style").css({width:o.$imageEl.width(),height:o.$imageEl.height(),left:-1*o.$editor.position().left,top:-1*o.$editor.position().top,"-webkit-transform":"rotate("+i+"deg) scale("+n+") translateX("+a[0]+"%) translateY("+a[1]+"%)","-moz-transform":"rotate("+i+"deg) scale("+n+") translateX("+a[0]+"%) translateY("+a[1]+"%)",transform:"rotate("+i+"deg) scale("+n+") translateX("+a[0]+"%) translateY("+a[1]+"%)"}))},setAreaInfo:function(t){var o=e.popup.editor.cropper,i=e.popup.editor.scale||1;o.$editor.find(".area-info").html((o.isResizing||"size"==t?["W: "+Math.round(o.crop.width/o.crop.cfWidth/i)+"px"," ","H: "+Math.round(o.crop.height/o.crop.cfHeight/i)+"px"]:["X: "+Math.round(o.crop.left/o.crop.cfWidth/i)+"px"," ","Y: "+Math.round(o.crop.top/o.crop.cfHeight/i)+"px"]).join(""))},mousedown:function(t){var o=t.originalEvent.touches&&t.originalEvent.touches[0]?"touchstart":"mousedown",i=$(t.target),a=e.popup.editor.cropper,r={x:("mousedown"==o?t.pageX:t.originalEvent.touches[0].pageX)-a.$template.offset().left,y:("mousedown"==o?t.pageY:t.originalEvent.touches[0].pageY)-a.$template.offset().top},l=function(){a.pointData={el:i,x:r.x,y:r.y,xEditor:r.x-a.crop.left,yEditor:r.y-a.crop.top,left:a.crop.left,top:a.crop.top,width:a.crop.width,height:a.crop.height},(a.isMoving||a.isResizing)&&(a.setAreaInfo("size"),a.$editor.addClass("moving show-info"),$("body").css({"-webkit-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none"}),$(document).on("mousemove touchmove",a.mousemove))};if(3==t.which)return!0;e.popup.zoomer&&e.popup.zoomer.hasSpacePressed||(a.isMoving=i.is(".area-move"),a.isResizing=i.is(".point"),"mousedown"==o&&l(),"touchstart"==o&&1==t.originalEvent.touches.length&&((a.isMoving||a.isResizing)&&t.preventDefault(),a.isTouchLongPress=!0,setTimeout((function(){a.isTouchLongPress&&(delete a.isTouchLongPress,l())}),n.thumbnails.touchDelay?n.thumbnails.touchDelay:0)),$(document).on("mouseup touchend",a.mouseup))},mousemove:function(t){var o=t.originalEvent.touches&&t.originalEvent.touches[0]?"touchstart":"mousedown",i=($(t.target),e.popup.editor.cropper),a={x:("mousedown"==o?t.pageX:t.originalEvent.touches[0].pageX)-i.$template.offset().left,y:("mousedown"==o?t.pageY:t.originalEvent.touches[0].pageY)-i.$template.offset().top};if(t.originalEvent.touches&&1!=t.originalEvent.touches.length)return i.mouseup(t);if(i.isMoving){var r=a.x-i.pointData.xEditor,l=a.y-i.pointData.yEditor;r+i.crop.width>i.$template.width()&&(r=i.$template.width()-i.crop.width),r<0&&(r=0),l+i.crop.height>i.$template.height()&&(l=i.$template.height()-i.crop.height),l<0&&(l=0),i.crop.left=r,i.crop.top=l}if(i.isResizing){var s,p=i.pointData.el.attr("class").substr(12),d=i.crop.left+i.crop.width,u=i.crop.top+i.crop.height,c=(n.editor.cropper&&n.editor.cropper.minWidth||0)*i.crop.cfWidth,h=(n.editor.cropper&&n.editor.cropper.minHeight||0)*i.crop.cfHeight,m=(n.editor.cropper&&n.editor.cropper.maxWidth)*i.crop.cfWidth,g=(n.editor.cropper&&n.editor.cropper.maxHeight)*i.crop.cfHeight,v=n.editor.cropper?n.editor.cropper.ratio:null;if(c>i.$template.width()&&(c=i.$template.width()),h>i.$template.height()&&(h=i.$template.height()),m>i.$template.width()&&(m=i.$template.width()),g>i.$template.height()&&(g=i.$template.height()),("a"==p||"b"==p||"c"==p)&&!s&&(i.crop.top=a.y,i.crop.top<0&&(i.crop.top=0),i.crop.height=u-i.crop.top,i.crop.top>i.crop.top+i.crop.height&&(i.crop.top=u,i.crop.height=0),i.crop.height<h&&(i.crop.top=u-h,i.crop.height=h),i.crop.height>g&&(i.crop.top=u-g,i.crop.height=g),(s=v?f._assets.ratioToPx(i.crop.width,i.crop.height,v):null)&&(i.crop.width=s[0],"a"!=p&&"b"!=p||(i.crop.left=Math.max(0,i.pointData.left+(i.pointData.width-i.crop.width)/("b"==p?2:1))),i.crop.left+i.crop.width>i.$template.width()))){var b=i.$template.width()-i.crop.left;i.crop.width=b,i.crop.height=b/s[2]*s[3],i.crop.top=u-i.crop.height}if(("e"==p||"f"==p||"g"==p)&&!s&&(i.crop.height=a.y-i.crop.top,i.crop.height+i.crop.top>i.$template.height()&&(i.crop.height=i.$template.height()-i.crop.top),i.crop.height<h&&(i.crop.height=h),i.crop.height>g&&(i.crop.height=g),(s=v?f._assets.ratioToPx(i.crop.width,i.crop.height,v):null)&&(i.crop.width=s[0],"f"!=p&&"g"!=p||(i.crop.left=Math.max(0,i.pointData.left+(i.pointData.width-i.crop.width)/("f"==p?2:1))),i.crop.left+i.crop.width>i.$template.width()))){b=i.$template.width()-i.crop.left;i.crop.width=b,i.crop.height=b/s[2]*s[3]}if(("c"==p||"d"==p||"e"==p)&&!s&&(i.crop.width=a.x-i.crop.left,i.crop.width+i.crop.left>i.$template.width()&&(i.crop.width=i.$template.width()-i.crop.left),i.crop.width<c&&(i.crop.width=c),i.crop.width>m&&(i.crop.width=m),(s=v?f._assets.ratioToPx(i.crop.width,i.crop.height,v):null)&&(i.crop.height=s[1],"c"!=p&&"d"!=p||(i.crop.top=Math.max(0,i.pointData.top+(i.pointData.height-i.crop.height)/("d"==p?2:1))),i.crop.top+i.crop.height>i.$template.height()))){var w=i.$template.height()-i.crop.top;i.crop.height=w,i.crop.width=w/s[3]*s[2]}if(("a"==p||"g"==p||"h"==p)&&!s&&(i.crop.left=a.x,i.crop.left>i.$template.width()&&(i.crop.left=i.$template.width()),i.crop.left<0&&(i.crop.left=0),i.crop.width=d-i.crop.left,i.crop.left>i.crop.left+i.crop.width&&(i.crop.left=d,i.crop.width=0),i.crop.width<c&&(i.crop.left=d-c,i.crop.width=c),i.crop.width>m&&(i.crop.left=d-m,i.crop.width=m),(s=v?f._assets.ratioToPx(i.crop.width,i.crop.height,v):null)&&(i.crop.height=s[1],"a"!=p&&"h"!=p||(i.crop.top=Math.max(0,i.pointData.top+(i.pointData.height-i.crop.height)/("h"==p?2:1))),i.crop.top+i.crop.height>i.$template.height()))){w=i.$template.height()-i.crop.top;i.crop.height=w,i.crop.width=w/s[3]*s[2],i.crop.left=d-i.crop.width}}i.drawPlaceHolder(i.crop)},mouseup:function(t){var o=e.popup.editor.cropper;0!=o.$editor.width()&&0!=o.$editor.height()||o.init(o.setDefaultData()),delete o.isTouchLongPress,delete o.isMoving,delete o.isResizing,o.$editor.removeClass("moving show-info"),$("body").css({"-webkit-user-select":"","-moz-user-select":"","-ms-user-select":"","user-select":""}),$(document).off("mousemove touchmove",o.mousemove),$(document).off("mouseup touchend",o.mouseup)}},e.popup.editor.cropper.init()}},resize:function(e,t,o,i,n,a){var r=t.getContext("2d"),l=(o=!o&&i?i*e.width/e.height:o,i=!i&&o?o*e.height/e.width:i,e.width/e.height),s=l>=1?o:i*l,p=l<1?i:o/l;a&&s<o&&(p*=o/s,s=o),a&&p<i&&(s*=i/p,p=i);var d=Math.min(Math.ceil(Math.log(e.width/s)/Math.log(2)),12);if(t.width=s,t.height=p,e.width<t.width||e.height<t.height||d<2){a||(t.width=Math.min(e.width,t.width),t.height=Math.min(e.height,t.height));var u=e.width<t.width?(t.width-e.width)/2:0,c=e.height<t.height?(t.height-e.height)/2:0;n||(r.fillStyle="#fff",r.fillRect(0,0,t.width,t.height)),r.drawImage(e,u,c,Math.min(e.width,t.width),Math.min(e.height,t.height))}else{var f=document.createElement("canvas"),h=f.getContext("2d"),m=2;for(f.width=e.width/m,f.height=e.height/m,h.fillStyle="#fff",h.fillRect(0,0,f.width,f.height),h.imageSmoothingEnabled=!1,h.imageSmoothingQuality="high",h.drawImage(e,0,0,f.width,f.height);d>2;){var g=m+2,v=e.width/m,b=e.height/m;v>f.width&&(v=f.width),b>f.height&&(b=f.height),h.imageSmoothingEnabled=!0,h.drawImage(f,0,0,v,b,0,0,e.width/g,e.height/g),m=g,d--}v=e.width/m,b=e.height/m;v>f.width&&(v=f.width),b>f.height&&(b=f.height),r.drawImage(f,0,0,v,b,0,0,s,p),f=h=null}r=null},zoomer:function(e){if(e.popup&&e.popup.html&&$("html").find(e.popup.html).length){if(!e.popup.zoomer){var t=e.popup.html,o=t.find(".fileuploader-popup-node"),i=o.find(".reader-node"),a=i.find("> img").attr("draggable","false").attr("ondragstart","return false;");e.popup.zoomer={html:t.find(".fileuploader-popup-zoomer"),isActive:"image"==e.format&&e.popup.node&&n.thumbnails.popup.zoomer,scale:100,zoom:100,init:function(){var e=this;if(!e.isActive||f._assets.isIE()||f._assets.isMobile())return e.html.hide()&&o.addClass("has-node-centered");e.hide(),e.resize(),$(window).on("resize",e.resize),$(window).on("keyup keydown",e.keyPress),e.html.find("input").on("input change",e.range),i.on("mousedown touchstart",e.mousedown),o.on("mousewheel DOMMouseScroll",e.scroll)},hide:function(){var e=this;$(window).off("resize",e.resize),$(window).off("keyup keydown",e.keyPress),e.html.find("input").off("input change",e.range),i.off("mousedown",e.mousedown),o.off("mousewheel DOMMouseScroll",e.scroll)},center:function(e){var t=this,n=0,r=0;e?(n=t.left,r=t.top,n-=(o.width()/2-t.left)*(i.width()/e[0]-1),r-=(o.height()/2-t.top)*(i.height()/e[1]-1),i.width()<=o.width()&&(n=Math.round((o.width()-i.width())/2)),i.height()<=o.height()&&(r=Math.round((o.height()-i.height())/2)),i.width()>o.width()&&(n>0?n=0:n+i.width()<o.width()&&(n=o.width()-i.width())),i.height()>o.height()&&(r>0?r=0:r+i.height()<o.height()&&(r=o.height()-i.height())),r=Math.min(r,0)):(n=Math.round((o.width()-i.width())/2),r=Math.round((o.height()-a.height())/2)),i.css({left:(t.left=n)+"px",top:(t.top=r)+"px",width:i.width(),height:i.height()})},resize:function(){var t=e.popup.zoomer;o.removeClass("is-zoomed"),i.removeAttr("style"),t.scale=t.getImageScale(),t.updateView()},range:function(t){var o=e.popup.zoomer,i=$(this),n=parseFloat(i.val());if(o.scale>=100)return t.preventDefault(),void i.val(o.scale);n<o.scale&&(t.preventDefault(),n=o.scale,i.val(n)),o.updateView(n,!0)},scroll:function(t){var o=e.popup.zoomer,i=-100;t.originalEvent&&(t.originalEvent.wheelDelta&&(i=t.originalEvent.wheelDelta/-40),t.originalEvent.deltaY&&(i=t.originalEvent.deltaY),t.originalEvent.detail&&(i=t.originalEvent.detail)),o[i<0?"zoomIn":"zoomOut"](3)},keyPress:function(t){var o=e.popup.zoomer,n=t.type;32==(t.keyCode||t.which)&&(o.hasSpacePressed="keydown"==n,o.hasSpacePressed&&o.isZoomed()?i.addClass("is-amoving"):i.removeClass("is-amoving"))},mousedown:function(t){var o=e.popup.zoomer,r=$(t.target),l=t.originalEvent.touches&&t.originalEvent.touches[0]?"touchstart":"mousedown",s={x:"mousedown"==l?t.pageX:t.originalEvent.touches[0].pageX,y:"mousedown"==l?t.pageY:t.originalEvent.touches[0].pageY},p=function(){o.pointData={x:s.x,y:s.y,xTarget:s.x-o.left,yTarget:s.y-o.top},$("body").css({"-webkit-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none"}),i.addClass("is-moving"),$(document).on("mousemove",o.mousemove)};1==t.which&&100!=o.scale&&o.zoom!=o.scale&&(o.hasSpacePressed||r[0]==a[0]||r.is(".fileuploader-cropper"))&&("mousedown"==l&&p(),"touchstart"==l&&(o.isTouchLongPress=!0,setTimeout((function(){o.isTouchLongPress&&(delete o.isTouchLongPress,p())}),n.thumbnails.touchDelay?n.thumbnails.touchDelay:0)),$(document).on("mouseup touchend",o.mouseup))},mousemove:function(t){var n=e.popup.zoomer,a=t.originalEvent.touches&&t.originalEvent.touches[0]?"touchstart":"mousedown",r="mousedown"==a?t.pageX:t.originalEvent.touches[0].pageX,l="mousedown"==a?t.pageY:t.originalEvent.touches[0].pageY,s=r-n.pointData.xTarget,p=l-n.pointData.yTarget;p>0&&(p=0),p<o.height()-i.height()&&(p=o.height()-i.height()),i.height()<o.height()&&(p=o.height()/2-i.height()/2),i.width()>o.width()?(s>0&&(s=0),s<o.width()-i.width()&&(s=o.width()-i.width())):s=o.width()/2-i.width()/2,i.css({left:(n.left=s)+"px",top:(n.top=p)+"px"})},mouseup:function(t){var o=e.popup.zoomer;delete o.pointData,$("body").css({"-webkit-user-select":"","-moz-user-select":"","-ms-user-select":"","user-select":""}),i.removeClass("is-moving"),$(document).off("mousemove",o.mousemove),$(document).off("mouseup",o.mouseup)},zoomIn:function(t){var o=e.popup.zoomer,i=t||20;o.zoom>=100||(o.zoom=Math.min(100,o.zoom+i),o.updateView(o.zoom))},zoomOut:function(t){var o=e.popup.zoomer,i=t||20;o.zoom<=o.scale||(o.zoom=Math.max(o.scale,o.zoom-i),o.updateView(o.zoom))},updateView:function(t,n){var a=this,r=a.getImageSize().width/100*t,l=a.getImageSize().height/100*t,s=i.width(),p=i.height(),d=t&&t!=a.scale;if(!a.isActive)return a.center();d?(o.addClass("is-zoomed"),i.addClass("is-movable").css({width:r+"px",height:l+"px",maxWidth:"none",maxHeight:"none"})):(o.removeClass("is-zoomed"),i.removeClass("is-movable is-amoving").removeAttr("style")),a.zoom=t||a.scale,a.center(d?[s,p,a.left,a.top]:null),a.html.find("span").html(a.zoom+"%"),n||a.html.find("input").val(a.zoom),t&&e.popup.editor&&e.popup.editor.cropper&&e.popup.editor.cropper.resize(!0)},isZoomed:function(){return this.zoom>this.scale},getImageSize:function(){return{width:a.prop("naturalWidth"),height:a.prop("naturalHeight")}},getImageScale:function(){return Math.round(100/(a.prop("naturalWidth")/a.width()))}}}e.popup.zoomer.init()}},save:function(e,t,i,a,r){var d=e.popup&&e.popup.html&&$("html").find(e.popup.html).length,u=new Image,c=function(){if(e.reader.node){var d=document.createElement("canvas"),u=d.getContext("2d"),c=[0,180],h=i||e.type||"image/jpeg",m=n.editor.quality||90,g=function(i,d){var u=i;t&&(u?u=f._assets.dataURItoBlob(u,h):console.error("Error: Failed to execute 'toDataURL' on 'HTMLCanvasElement': Tainted canvases may not be exported.")),!r&&u&&f.thumbnails.renderThumbnail(e,!0,d||i),a&&a(u,e,l,p,o,s),null!=n.editor.onSave&&"function"==typeof n.editor.onSave&&n.editor.onSave(u,e,l,p,o,s),f.set("listInput",null)};try{if(d.width=e.reader.width,d.height=e.reader.height,u.drawImage(this,0,0,e.reader.width,e.reader.height),void 0!==e.editor.rotation){e.editor.rotation=e.editor.rotation||0,d.width=c.indexOf(e.editor.rotation)>-1?e.reader.width:e.reader.height,d.height=c.indexOf(e.editor.rotation)>-1?e.reader.height:e.reader.width;var v=e.editor.rotation*Math.PI/180,b=.5*d.width,w=.5*d.height;u.clearRect(0,0,d.width,d.height),u.translate(b,w),u.rotate(v),u.translate(.5*-e.reader.width,.5*-e.reader.height),u.drawImage(this,0,0),u.setTransform(1,0,0,1,0,0)}if(e.editor.crop){var x=u.getImageData(e.editor.crop.left,e.editor.crop.top,e.editor.crop.width,e.editor.crop.height);d.width=e.editor.crop.width,d.height=e.editor.crop.height,u.putImageData(x,0,0)}var y=d.toDataURL(h,m/100);if(n.editor.maxWidth||n.editor.maxHeight){var $=new Image;$.src=y,$.onload=function(){var e=document.createElement("canvas");f.editor.resize($,e,n.editor.maxWidth,n.editor.maxHeight,!0,!1),y=e.toDataURL(h,m/100),d=u=e=null,g(y,$)}}else d=u=null,g(y)}catch(t){e.popup.editor=null,d=u=null,g(null)}}};if(d){if(!e.popup.editor.hasChanges)return;var h=e.popup.editor.scale||1;e.editor.rotation=e.popup.editor.rotation||0,e.popup.editor.cropper&&(e.editor.crop=e.popup.editor.cropper.crop,e.editor.crop.width=e.editor.crop.width/e.popup.editor.cropper.crop.cfWidth/h,e.editor.crop.left=e.editor.crop.left/e.popup.editor.cropper.crop.cfWidth/h,e.editor.crop.height=e.editor.crop.height/e.popup.editor.cropper.crop.cfHeight/h,e.editor.crop.top=e.editor.crop.top/e.popup.editor.cropper.crop.cfHeight/h)}f._assets.isMobile()?(u.onload=c,u.src=e.reader.src):e.popup.node?c.call(e.popup.node):e.reader.node?c.call(e.reader.node):e.reader.read(e,(function(){c.call(e.reader.node)}))}},sorter:{init:function(){p.on("mousedown touchstart",n.thumbnails._selectors.sorter,f.sorter.mousedown)},destroy:function(){p.off("mousedown touchstart",n.thumbnails._selectors.sorter,f.sorter.mousedown)},findItemAtPos:function(e){var t=f.sorter.sort,o=t.items.not(t.item.html),i=null;return o.each((function(t,o){var n=$(o);if(e.x>n.offset().left&&e.x<n.offset().left+n.outerWidth()&&e.y>n.offset().top&&e.y<n.offset().top+n.outerHeight())return i=n,!1})),i},mousedown:function(e){var t=e.originalEvent.touches&&e.originalEvent.touches[0]?"touchstart":"mousedown",o=$(e.target),i=o.closest(n.thumbnails._selectors.item),a=f.files.find(i),r={x:"mousedown"!=t&&i.length?e.originalEvent.touches[0].pageX:e.pageX,y:"mousedown"!=t&&i.length?e.originalEvent.touches[0].pageY:e.pageY},s=function(){f.sorter.sort={el:o,item:a,items:l.find(n.thumbnails._selectors.item),x:r.x,y:r.y,xItem:r.x-i.offset().left,yItem:r.y-i.offset().top,left:i.position().left,top:i.position().top,width:i.outerWidth(),height:i.outerHeight(),placeholder:n.sorter.placeholder?$(n.sorter.placeholder):$(a.html.get(0).cloneNode()).addClass("fileuploader-sorter-placeholder")},$("body").css({"-webkit-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none"}),$(document).on("mousemove touchmove",f.sorter.mousemove)};return f.sorter.sort&&f.sorter.mouseup(),3==e.which||(!a||(!(!n.sorter.selectorExclude||!o.is(n.sorter.selectorExclude)&&!o.closest(n.sorter.selectorExclude).length)||(e.preventDefault(),"mousedown"==t&&s(),"touchstart"==t&&(f.sorter.isTouchLongPress=!0,setTimeout((function(){f.sorter.isTouchLongPress&&(delete f.sorter.isTouchLongPress,s())}),n.thumbnails.touchDelay?n.thumbnails.touchDelay:0)),void $(document).on("mouseup touchend",f.sorter.mouseup))))},mousemove:function(e){var t=e.originalEvent.touches&&e.originalEvent.touches[0]?"touchstart":"mousedown",o=f.sorter.sort,i=o.item,a=l.find(n.thumbnails._selectors.item),r=$(n.sorter.scrollContainer||window),s=$(document).scrollLeft(),p=$(document).scrollTop(),d=r.scrollLeft(),u=r.scrollTop(),c={x:"mousedown"==t?e.clientX:e.originalEvent.touches[0].clientX,y:"mousedown"==t?e.clientY:e.originalEvent.touches[0].clientY},h=c.x-o.xItem,m=c.y-o.yItem,g=c.x-(r.prop("offsetLeft")||0),v=c.y-(r.prop("offsetTop")||0);h+o.xItem>r.width()&&(h=r.width()-o.xItem),h+o.xItem<0&&(h=0-o.xItem),m+o.yItem>r.height()&&(m=r.height()-o.yItem),m+o.yItem<0&&(m=0-o.yItem),v<=0&&r.scrollTop(u-10),v>r.height()&&r.scrollTop(u+10),g<0&&r.scrollLeft(d-10),g>r.width()&&r.scrollLeft(d+10),i.html.addClass("sorting").css({position:"fixed",left:h,top:m,width:f.sorter.sort.width,height:f.sorter.sort.height}),l.find(o.placeholder).length||i.html.after(o.placeholder),o.placeholder.css({width:f.sorter.sort.width,height:f.sorter.sort.height});var b=f.sorter.findItemAtPos({x:h+o.xItem+s,y:m+o.yItem+p});if(b){var w=o.placeholder.offset().left!=b.offset().left,x=o.placeholder.offset().top!=b.offset().top;if(f.sorter.sort.lastHover&&f.sorter.sort.lastHover.el==b[0]){if(x&&"before"==f.sorter.sort.lastHover.direction&&c.y<f.sorter.sort.lastHover.y)return;if(x&&"after"==f.sorter.sort.lastHover.direction&&c.y>f.sorter.sort.lastHover.y)return;if(w&&"before"==f.sorter.sort.lastHover.direction&&c.x<f.sorter.sort.lastHover.x)return;if(w&&"after"==f.sorter.sort.lastHover.direction&&c.x>f.sorter.sort.lastHover.x)return}var y=a.index(i.html)>a.index(b)?"before":"after";b[y](o.placeholder),b[y](i.html),f.sorter.sort.lastHover={el:b[0],x:c.x,y:c.y,direction:y}}},mouseup:function(){var e=f.sorter.sort,t=e.item;$("body").css({"-webkit-user-select":"","-moz-user-select":"","-ms-user-select":"","user-select":""}),t.html.removeClass("sorting").css({position:"",left:"",top:"",width:"",height:""}),$(document).off("mousemove touchmove",f.sorter.mousemove),$(document).off("mouseup touchend",f.sorter.mouseup),e.placeholder.remove(),delete f.sorter.sort,f.sorter.save()},save:function(e){var t,i=0,a=[],r=[],d=e?f._itFl:n.thumbnails.itemPrepend?l.children().get().reverse():l.children();$.each(d,(function(e,o){var n=o.file?o:f.files.find($(o));if(n){if(n.upload&&!n.uploaded)return;f.rendered&&n.index!=i&&(f._itSl&&f._itSl.indexOf(n.id),1)&&(t=!0),n.index=i,a.push(n),r.push(n.id),i++}})),f._itSl&&f._itSl.length!=r.length&&(t=!0),f._itSl=r,t&&a.length==f._itFl.length&&(f._itFl=a),e||f.set("listInput","ignoreSorter"),t&&null!=n.sorter.onSort&&"function"==typeof n.sorter.onSort&&n.sorter.onSort(a,l,p,o,s)}},upload:{prepare:function(e,t){e.upload={url:n.upload.url,data:$.extend({},n.upload.data),formData:new FormData,type:n.upload.type||"POST",enctype:n.upload.enctype||"multipart/form-data",cache:!1,contentType:!1,processData:!1,chunk:e.upload?e.upload.chunk:null,status:null,send:function(t){f.upload.send(e,t)},cancel:function(t){f.upload.cancel(e,t)}},e.upload.formData.append(s.attr("name"),e.file,!!e.name&&e.name),(n.upload.start||t)&&f.upload.send(e,t)},send:function(e,t){if(e.upload){var i=function(t){e.html&&e.html.removeClass("upload-pending upload-loading upload-cancelled upload-failed upload-successful").addClass("upload-"+(t||e.upload.status))},a=function(){var t=0;if(f._pfuL.length>0)for(f._pfuL.indexOf(e)>-1&&f._pfuL.splice(f._pfuL.indexOf(e),1);t<f._pfuL.length;){if(f._itFl.indexOf(f._pfuL[t])>-1&&f._pfuL[t].upload&&!f._pfuL[t].upload.$ajax){f.upload.send(f._pfuL[t],!0);break}f._pfuL.splice(t,1),t++}};if(n.upload.synchron&&!e.upload.chunk)if(e.upload.status="pending",e.html&&i(),t)f._pfuL.indexOf(e)>-1&&f._pfuL.splice(f._pfuL.indexOf(e),1);else if(-1==f._pfuL.indexOf(e)&&f._pfuL.push(e),f._pfuL.length>1)return;if(n.upload.chunk&&e.file.slice){var r=f._assets.toBytes(n.upload.chunk),d=Math.ceil(e.size/r,r);if(d>1&&!e.upload.chunk&&(e.upload.chunk={name:e.name,size:e.file.size,type:e.file.type,chunkSize:r,temp_name:e.name,loaded:0,total:d,i:-1}),e.upload.chunk)if(e.upload.chunk.i++,delete e.upload.chunk.isFirst,delete e.upload.chunk.isLast,0==e.upload.chunk.i&&(e.upload.chunk.isFirst=!0),e.upload.chunk.i==e.upload.chunk.total-1&&(e.upload.chunk.isLast=!0),e.upload.chunk.i<=e.upload.chunk.total-1){var u=e.upload.chunk.i*e.upload.chunk.chunkSize,c=e.file.slice(u,u+e.upload.chunk.chunkSize);e.upload.formData=new FormData,e.upload.formData.append(s.attr("name"),c),e.upload.data._chunkedd=JSON.stringify(e.upload.chunk)}else delete e.upload.chunk}if(n.upload.beforeSend&&$.isFunction(n.upload.beforeSend)&&!1===n.upload.beforeSend(e,l,p,o,s))return delete e.upload.chunk,i(),void a();if(p.addClass("fileuploader-is-uploading"),e.upload.$ajax&&e.upload.$ajax.abort(),delete e.upload.$ajax,delete e.upload.send,e.upload.status="loading",e.html&&(n.thumbnails._selectors.start&&e.html.find(n.thumbnails._selectors.start).remove(),i()),e.upload.data)for(var h in e.upload.data)e.upload.data.hasOwnProperty(h)&&e.upload.formData.append(h,e.upload.data[h]);e.upload.data=e.upload.formData,e.upload.xhrStartedAt=e.upload.chunk&&e.upload.chunk.xhrStartedAt?e.upload.chunk.xhrStartedAt:new Date,e.upload.xhr=function(){var t=$.ajaxSettings.xhr();return t.upload&&t.upload.addEventListener("progress",(function(t){e.upload.$ajax&&(e.upload.$ajax.total=e.upload.chunk?e.upload.chunk.size:t.total),f.upload.progressHandling(t,e,e.upload.xhrStartedAt)}),!1),t},e.upload.complete=function(t,i){if(e.upload.chunk&&!e.upload.chunk.isLast&&"success"==i)return f.upload.prepare(e,!0);a(),delete e.upload.xhrStartedAt;var r=!0;$.each(f._itFl,(function(e,t){t.upload&&t.upload.$ajax&&(r=!1)})),r&&(p.removeClass("fileuploader-is-uploading"),null!=n.upload.onComplete&&"function"==typeof n.upload.onComplete&&n.upload.onComplete(l,p,o,s,t,i))},e.upload.success=function(t,a,r){if(!e.upload.chunk||e.upload.chunk.isLast)delete e.upload.chunk,f.upload.progressHandling(null,e,e.upload.xhrStartedAt,!0),e.uploaded=!0,delete e.upload,e.upload={status:"successful",resend:function(){f.upload.retry(e)}},e.html&&i(),null!=n.upload.onSuccess&&$.isFunction(n.upload.onSuccess)&&n.upload.onSuccess(t,e,l,p,o,s,a,r),f.set("listInput",null);else try{var d=JSON.parse(t);e.upload.chunk.temp_name=d.fileuploader.temp_name}catch(e){}},e.upload.error=function(t,a,r){e.upload.chunk&&(e.upload.chunk.i=Math.max(-1,e.upload.chunk.i-1)),e.uploaded=!1,e.upload.status="cancelled"==e.upload.status?e.upload.status:"failed",e.upload.retry=function(){f.upload.retry(e)},delete e.upload.$ajax,e.html&&i(),null!=n.upload.onError&&$.isFunction(n.upload.onError)&&n.upload.onError(e,l,p,o,s,t,a,r)},e.upload.$ajax=$.ajax(e.upload)}},cancel:function(e,t){e&&e.upload&&(e.upload.status="cancelled",delete e.upload.chunk,e.upload.$ajax&&e.upload.$ajax.abort(),delete e.upload.$ajax,!t&&f.files.remove(e))},retry:function(e){e&&e.upload&&(e.html&&n.thumbnails._selectors.retry&&e.html.find(n.thumbnails._selectors.retry).remove(),f.upload.prepare(e,!0))},progressHandling:function(e,t,i,a){if(!e&&a&&t.upload.$ajax&&(e={total:t.upload.$ajax.total||t.size,loaded:t.upload.$ajax.total||t.size,lengthComputable:!0}),e.lengthComputable){var r=new Date,d=e.loaded+(t.upload.chunk?t.upload.chunk.loaded:0),u=t.upload.chunk?t.upload.chunk.size:e.total,c=Math.round(100*d/u),h=t.upload.chunk&&t.upload.chunk.xhrStartedAt?t.upload.chunk.xhrStartedAt:i,m=(r.getTime()-h.getTime())/1e3,g=m?d/m:0,v=Math.max(0,u-d),b=Math.max(0,m?v/g:0),w={loaded:d,loadedInFormat:f._assets.bytesToText(d),total:u,totalInFormat:f._assets.bytesToText(u),percentage:c,secondsElapsed:m,secondsElapsedInFormat:f._assets.secondsToText(m,!0),bytesPerSecond:g,bytesPerSecondInFormat:f._assets.bytesToText(g)+"/s",remainingBytes:v,remainingBytesInFormat:f._assets.bytesToText(v),secondsRemaining:b,secondsRemainingInFormat:f._assets.secondsToText(b,!0)};t.upload.chunk&&(t.upload.chunk.isFirst&&(t.upload.chunk.xhrStartedAt=i),e.loaded!=e.total||t.upload.chunk.isLast||(t.upload.chunk.loaded+=Math.max(e.total,t.upload.chunk.total/t.upload.chunk.chunkSize))),w.percentage>99&&!a&&(w.percentage=99),n.upload.onProgress&&$.isFunction(n.upload.onProgress)&&n.upload.onProgress(w,t,l,p,o,s)}}},dragDrop:{onDragEnter:function(e){clearTimeout(f.dragDrop._timer),n.dragDrop.container.addClass("fileuploader-dragging"),f.set("feedback",f._assets.textParse(n.captions.drop)),null!=n.dragDrop.onDragEnter&&$.isFunction(n.dragDrop.onDragEnter)&&n.dragDrop.onDragEnter(e,l,p,o,s)},onDragLeave:function(e){clearTimeout(f.dragDrop._timer),f.dragDrop._timer=setTimeout((function(e){if(!f.dragDrop._dragLeaveCheck(e))return!1;n.dragDrop.container.removeClass("fileuploader-dragging"),f.set("feedback",null),null!=n.dragDrop.onDragLeave&&$.isFunction(n.dragDrop.onDragLeave)&&n.dragDrop.onDragLeave(e,l,p,o,s)}),100,e)},onDrop:function(e){clearTimeout(f.dragDrop._timer),n.dragDrop.container.removeClass("fileuploader-dragging"),f.set("feedback",null),e&&e.originalEvent&&e.originalEvent.dataTransfer&&e.originalEvent.dataTransfer.files&&e.originalEvent.dataTransfer.files.length&&(f.isUploadMode()?f.onChange(e,e.originalEvent.dataTransfer.files):s.prop("files",e.originalEvent.dataTransfer.files).trigger("change")),null!=n.dragDrop.onDrop&&$.isFunction(n.dragDrop.onDrop)&&n.dragDrop.onDrop(e,l,p,o,s)},_dragLeaveCheck:function(e){var t=$(e.currentTarget);return!(!t.is(n.dragDrop.container)&&n.dragDrop.container.find(t).length)}},clipboard:{paste:function(e){if(f._assets.isIntoView(o)&&e.originalEvent.clipboardData&&e.originalEvent.clipboardData.items&&e.originalEvent.clipboardData.items.length){var t=e.originalEvent.clipboardData.items;f.clipboard.clean();for(var i=0;i<t.length;i++)if(-1!==t[i].type.indexOf("image")||-1!==t[i].type.indexOf("text/uri-list")){var a=t[i].getAsFile(),r=n.clipboardPaste>1?n.clipboardPaste:2e3;a&&(a._name=f._assets.generateFileName(-1!=a.type.indexOf("/")?a.type.split("/")[1].toString().toLowerCase():"png","Clipboard "),f.set("feedback",f._assets.textParse(n.captions.paste,{ms:r/1e3})),f.clipboard._timer=setTimeout((function(){f.set("feedback",null),f.onChange(e,[a])}),r-2))}}},clean:function(){f.clipboard._timer&&(clearTimeout(f.clipboard._timer),delete f.clipboard._timer,f.set("feedback",null))}},files:{add:function(e,t){var o,i,a=e._name||e.name,r=e.size,l=f._assets.bytesToText(r),p=e.type,d=p?p.split("/",1).toString().toLowerCase():"",u=-1!=a.indexOf(".")?a.split(".").pop().toLowerCase():"",c=a.substr(0,a.length-(-1!=a.indexOf(".")?u.length+1:u.length)),h={name:a,title:c,size:r,size2:l,type:p,format:d,extension:u,data:h=e.data||{},file:e.file||e,reader:{read:function(e,t,o){return f.files.read(i,e,t,o)}},id:"updated"==t?e.id:Date.now(),input:"choosed"==t?s:null,html:null,choosed:"choosed"==t,appended:"appended"==t||"updated"==t,uploaded:"uploaded"==t};return h.data.listProps||(h.data.listProps={}),!h.data.url&&h.appended&&(h.data.url=h.file),"updated"!=t?(f._itFl.push(h),o=f._itFl.length-1,i=f._itFl[o]):(o=f._itFl.indexOf(e),f._itFl[o]=i=h),i.remove=function(){f.files.remove(i)},n.editor&&"image"==d&&(i.editor={rotate:!1!==n.editor.rotation?function(e){f.editor.rotate(i,e)}:null,cropper:!1!==n.editor.cropper?function(e){f.editor.crop(i,e)}:null,save:function(e,t,o,n){f.editor.save(i,t,o,e,n)}}),e.local&&(i.local=e.local),o},read:function(e,t,i,a,r){if(f.isFileReaderSupported()&&!e.data.readerSkip){var d=new FileReader,u=window.URL||window.webkitURL,c=r&&e.data.thumbnail,h="string"!=typeof e.file,m=function(){var t=e.reader._callbacks||[];e.reader._timer&&(clearTimeout(e.reader._timer),delete e.reader._timer),delete e.reader._callbacks,delete e.reader._FileReader;for(var i=0;i<t.length;i++)$.isFunction(t[i])&&t[i](e,l,p,o,s);n.onFileRead&&$.isFunction(n.onFileRead)&&n.onFileRead(e,l,p,o,s)};if((!e.reader.src&&!e.reader._FileReader||a)&&(e.reader={_FileReader:d,_callbacks:[],read:e.reader.read}),e.reader.src&&!a)return t&&$.isFunction(t)?t(e,l,p,o,s):null;if(t&&e.reader._callbacks&&(e.reader._callbacks.push(t),e.reader._callbacks.length>1))return;if("astext"==e.format)d.onload=function(t){var o=document.createElement("div");e.reader.node=o,e.reader.src=t.target.result,e.reader.length=t.target.result.length,o.innerHTML=e.reader.src.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),m()},d.onerror=function(){m(),e.reader={read:e.reader.read}},h?d.readAsText(e.file):$.ajax({url:e.file,success:function(e){d.onload({target:{result:e}})},error:function(){d.onerror()}});else if("image"==e.format||c){if(d.onload=function(t){var o=new Image,i=function(){e.data&&e.data.readerCrossOrigin&&o.setAttribute("crossOrigin",e.data.readerCrossOrigin),o.src=t.target.result+(!e.data.readerForce&&!a||h||c||-1!=t.target.result.indexOf("data:image")?"":(-1==t.target.result.indexOf("?")?"?":"&")+"d="+Date.now()),o.onload=function(){if(e.reader.exifOrientation){var t=document.createElement("canvas"),i=t.getContext("2d"),n=o,a=Math.abs(e.reader.exifOrientation),r=e.reader.exifOrientation<0?e.reader.exifOrientation:0,l=[0,180];1==a&&(a=0),t.width=n.naturalWidth,t.height=n.naturalHeight,i.drawImage(n,0,0),t.width=l.indexOf(a)>-1?n.naturalWidth:n.naturalHeight,t.height=l.indexOf(a)>-1?n.naturalHeight:n.naturalWidth;var s=a*Math.PI/180,p=.5*t.width,d=.5*t.height;return i.clearRect(0,0,t.width,t.height),i.translate(p,d),i.rotate(s),i.translate(.5*-n.naturalWidth,.5*-n.naturalHeight),r&&([-1,-180].indexOf(r)>-1?(i.translate(t.width,0),i.scale(-1,1)):[-90,-270].indexOf(r)>-1&&(i.translate(0,t.width),i.scale(1,-1))),i.drawImage(n,0,0),i.setTransform(1,0,0,1,0,0),o.src=t.toDataURL(e.type,1),void delete e.reader.exifOrientation}e.reader.node=o,e.reader.src=o.src,e.reader.width=o.width,e.reader.height=o.height,e.reader.ratio=f._assets.pxToRatio(e.reader.width,e.reader.height),b&&u.revokeObjectURL(b),m(),c&&(e.reader={read:e.reader.read})},o.onerror=function(){m(),e.reader={read:e.reader.read}}};n.thumbnails.exif&&e.choosed?f._assets.getExifOrientation(e.file,(function(t){if(t){var o=f._assets.getDevice.init();"Chrome"==o.browser.name&&o.browser.version>=81?delete e.reader.exifOrientation:e.reader.exifOrientation=t}i()})):i()},d.onerror=function(){m(),e.reader={read:e.reader.read}},!c&&e.size>f._assets.toBytes(n.reader.maxSize))return d.onerror();h?n.thumbnails.useObjectUrl&&n.thumbnails.canvasImage&&u?d.onload({target:{result:b=u.createObjectURL(e.file)}}):d.readAsDataURL(e.file):d.onload({target:{result:c?e.data.thumbnail:e.file}})}else if("video"==e.format||"audio"==e.format){var g=(v=document.createElement(e.format)).canPlayType(e.type);if(d.onerror=function(){e.reader.node=null,m(),e.reader={read:e.reader.read}},u&&""!==g){if(r&&!n.thumbnails.videoThumbnail)return e.reader.node=v,m(),void(e.reader={read:e.reader.read});b=h?u.createObjectURL(e.file):e.file,v.onloadedmetadata=function(){e.reader.node=v,e.reader.src=v.src,e.reader.duration=v.duration,e.reader.duration2=f._assets.secondsToText(v.duration),"video"==e.format&&(e.reader.width=v.videoWidth,e.reader.height=v.videoHeight,e.reader.ratio=f._assets.pxToRatio(e.reader.width,e.reader.height))},v.onerror=function(){m(),e.reader={read:e.reader.read}},v.onloadeddata=function(){"video"==e.format?setTimeout((function(){var t=document.createElement("canvas"),o=t.getContext("2d");t.width=v.videoWidth,t.height=v.videoHeight,o.drawImage(v,0,0,t.width,t.height),e.reader.frame=f._assets.isBlankCanvas(t)?null:t.toDataURL(),t=o=null,m()}),300):m()},setTimeout((function(){e.data&&e.data.readerCrossOrigin&&v.setAttribute("crossOrigin",e.data.readerCrossOrigin),v.src=b+"#t=1"}),100)}else d.onerror()}else if("application/pdf"==e.type&&n.thumbnails.pdf&&!i){var v=document.createElement("iframe"),b=h?u.createObjectURL(e.file):e.file;n.thumbnails.pdf.viewer||f._assets.hasPlugin("pdf")?(v.src=(n.thumbnails.pdf.viewer||"")+b,e.reader.node=v,e.reader.src=b,m()):m()}else d.onload=function(t){e.reader.src=t.target.result,e.reader.length=t.target.result.length,m()},d.onerror=function(t){m(),e.reader={read:e.reader.read}},h?d[i||"readAsBinaryString"](e.file):m();e.reader._timer=setTimeout(d.onerror,r?n.reader.thumbnailTimeout:n.reader.timeout)}else t&&t(e,l,p,o,s);return null},list:function(e,t,i,a){var r=[];return!n.sorter||i||a&&"ignoreSorter"==a||f.sorter.save(!0),$.each(f._itFl,(function(o,i){var n=i;if(n.upload&&!n.uploaded)return!0;if((t||e)&&(n=(n.choosed&&!n.uploaded?"0:/":"")+(t&&null!==f.files.getItemAttr(i,t)?f.files.getItemAttr(n,t):n.local||n["string"==typeof n.file?"file":"name"])),e&&(n={file:n},i.editor&&(i.editor.crop||i.editor.rotation)&&(n.editor={},i.editor.rotation&&(n.editor.rotation=i.editor.rotation),i.editor.crop&&(n.editor.crop=i.editor.crop)),void 0!==i.index&&(n.index=i.index),i.data&&i.data.listProps))for(var a in i.data.listProps)n[a]=i.data.listProps[a];r.push(n)})),r=n.onListInput&&$.isFunction(n.onListInput)?n.onListInput(r,f._itFl,n.listInput,l,p,o,s):r,e?JSON.stringify(r):r},check:function(e,t,i){var a=["warning",null,!1,!1];if(null!=n.limit&&i&&t.length+f._itFl.length-1>n.limit)return a[1]=f._assets.textParse(n.captions.errors.filesLimit),a[3]=!0,a;if(null!=n.maxSize&&i){var r=0;if($.each(f._itFl,(function(e,t){r+=t.size})),r-=e.size,$.each(t,(function(e,t){r+=t.size})),r>f._assets.toBytes(n.maxSize))return a[1]=f._assets.textParse(n.captions.errors.filesSizeAll),a[3]=!0,a}if(null!=n.onFilesCheck&&$.isFunction(n.onFilesCheck)&&i&&!1===n.onFilesCheck(t,n,l,p,o,s))return a[3]=!0,a;if(null!=n.extensions&&-1==$.inArray(e.extension,n.extensions)&&!n.extensions.filter((function(t){return e.type.length&&(t.indexOf(e.type)>-1||t.indexOf(e.format+"/*")>-1)})).length)return a[1]=f._assets.textParse(n.captions.errors.filesType,e),a;if(null!=n.disallowedExtensions&&($.inArray(e.extension,n.disallowedExtensions)>-1||n.disallowedExtensions.filter((function(t){return!e.type.length||t.indexOf(e.type)>-1||t.indexOf(e.format+"/*")>-1})).length))return a[1]=f._assets.textParse(n.captions.errors.filesType,e),a;if(null!=n.fileMaxSize&&e.size>f._assets.toBytes(n.fileMaxSize))return a[1]=f._assets.textParse(n.captions.errors.fileSize,e),a;if(0==e.size&&""==e.type)return a[1]=f._assets.textParse(n.captions.errors.remoteFile,e),a;if((4096==e.size||64==e.size)&&""==e.type)return a[1]=f._assets.textParse(n.captions.errors.folderUpload,e),a;if(!n.skipFileNameCheck){r=!1;if($.each(f._itFl,(function(o,i){if(i!=e&&1==i.choosed&&i.file&&i.name==e.name)return r=!0,i.file.size!=e.size||i.file.type!=e.type||e.file.lastModified&&i.file.lastModified&&i.file.lastModified!=e.file.lastModified||!(t.length>1)?(a[1]=f._assets.textParse(n.captions.errors.fileName,e),a[2]=!1):a[2]=!0,!1})),r)return a}return!0},append:function(e){if((e=$.isArray(e)?e:[e]).length){for(var t,i=0;i<e.length;i++)f._assets.keyCompare(e[i],["name","file","size","type"])&&(t=f._itFl[f.files.add(e[i],"appended")],n.thumbnails&&f.thumbnails.item(t));return f.set("feedback",null),f.set("listInput",null),n.afterSelect&&$.isFunction(n.afterSelect)&&n.afterSelect(l,p,o,s),1!=e.length||t}},update:function(e,t){if(!(-1==f._itFl.indexOf(e)||e.upload&&e.upload.$ajax)){var o=e,i=f.files.add($.extend(e,t),"updated");(e=f._itFl[i]).popup&&e.popup.close&&e.popup.close(),n.thumbnails&&o.html&&f.thumbnails.item(e,o.html),f.set("listInput",null)}},find:function(e){var t=null;return $.each(f._itFl,(function(o,i){if(i.html&&i.html.is(e))return t=i,!1})),t},remove:function(e,t){if(t||!n.onRemove||!$.isFunction(n.onRemove)||!1!==n.onRemove(e,l,p,o,s)){if(e.html&&(n.thumbnails.onItemRemove&&$.isFunction(n.thumbnails.onItemRemove)&&!t?n.thumbnails.onItemRemove(e.html,l,p,o,s):e.html.remove()),e.upload&&e.upload.$ajax&&e.upload.cancel&&e.upload.cancel(!0),e.popup&&e.popup.close&&(e.popup.node=null,e.popup.close()),e.reader.src&&(e.reader.node=null,URL.revokeObjectURL(e.reader.src)),e.input){var i=!0;$.each(f._itFl,(function(o,n){if(e!=n&&(e.input==n.input||t&&e.input.get(0).files.length>1))return i=!1,!1})),i&&(f.isAddMoreMode()&&sl.length>1?(f.set("nextInput"),sl.splice(sl.indexOf(e.input),1),e.input.remove()):f.set("input",""))}f._pfrL.indexOf(e)>-1&&f._pfrL.splice(f._pfrL.indexOf(e),1),f._pfuL.indexOf(e)>-1&&f._pfuL.splice(f._pfuL.indexOf(e),1),f._itFl.indexOf(e)>-1&&f._itFl.splice(f._itFl.indexOf(e),1),e=null,0==f._itFl.length&&f.reset(),f.set("feedback",null),f.set("listInput",null)}},getItemAttr:function(e,t){var o=null;return e&&(void 0!==e[t]?o=e[t]:e.data&&void 0!==e.data[t]&&(o=e.data[t])),o},clear:function(e){for(var t=0;t<f._itFl.length;){var i=f._itFl[t];e||!i.appended?(i.html&&i.html&&f._itFl[t].html.remove(),i.upload&&i.upload.$ajax&&f.upload.cancel(i),f._itFl.splice(t,1)):t++}f.set("feedback",null),f.set("listInput",null),0==f._itFl.length&&n.onEmpty&&$.isFunction(n.onEmpty)&&n.onEmpty(l,p,o,s)}},reset:function(e){e&&(f.clipboard._timer&&f.clipboard.clean(),$.each(sl,(function(e,t){t.is(s)||t.remove()})),sl=[],f.set("input","")),f._itRl=[],f._pfuL=[],f._pfrL=[],f.files.clear(e)},destroy:function(){f.reset(!0),f.bindUnbindEvents(!1),s.closest("form").off("reset",f.reset),s.removeAttr("style"),p.before(s),delete s.get(0).FileUploader,p.remove(),p=o=l=null},_assets:{toBytes:function(e){return 1048576*parseInt(e)},bytesToText:function(e){if(0==e)return"0 Byte";var t=1024,o=Math.floor(Math.log(e)/Math.log(t)),i=e/Math.pow(t,o),n=!1;return i>1e3&&o<8&&(o+=1,i=e/Math.pow(t,o),n=!0),i.toPrecision(n?2:3)+" "+["Bytes","KB","MB","GB","TB","PB","EB","ZB","YB"][o]},escape:function(e){return(""+e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;")},secondsToText:function(e,t){e=parseInt(Math.round(e),10);var o=Math.floor(e/3600),i=Math.floor((e-3600*o)/60),n="";return(o>0||!t)&&(n+=(o<10?"0":"")+o+(t?"h ":":")),(i>0||!t)&&(n+=(i<10&&!t?"0":"")+i+(t?"m ":":")),n+=((e=e-3600*o-60*i)<10&&!t?"0":"")+e+(t?"s":"")},pxToRatio:function(e,t){var o=function(e,t){return 0==t?e:o(t,e%t)},i=o(e,t);return[e/i,t/i]},ratioToPx:function(e,t,o){return(o=(o+"").split(":")).length<2?null:[t/o[1]*o[0],e/o[0]*o[1],o[0],o[1]]},hasAttr:function(e,t){var o=(t=t||s).attr(e);return!(!o||void 0===o)},copyAllAttributes:function(e,t){return $.each(t.get(0).attributes,(function(){"required"!=this.name&&"type"!=this.name&&"id"!=this.name&&e.attr(this.name,this.value)})),t.get(0).FileUploader&&(e.get(0).FileUploader=t.get(0).FileUploader),e},isIntoView:function(e){var t=$(window).scrollTop(),o=t+window.innerHeight,i=e.offset().top,n=i+e.outerHeight();return t<i&&o>n},isBlankCanvas:function(e){var t=document.createElement("canvas"),o=!1;t.width=e.width,t.height=e.height;try{o=e.toDataURL()==t.toDataURL()}catch(e){}return t=null,o},generateFileName:function(e,t){var o=new Date,i=function(e){return e<10&&(e="0"+e),e};e=e?"."+e:"";return(t=t||"")+o.getFullYear()+"-"+i(o.getMonth()+1)+"-"+i(o.getDate())+" "+i(o.getHours())+"-"+i(o.getMinutes())+"-"+i(o.getSeconds())+e},arrayBufferToBase64:function(e){for(var t="",o=new Uint8Array(e),i=0;i<o.byteLength;i++)t+=String.fromCharCode(o[i]);return window.btoa(t)},dataURItoBlob:function(e,t){for(var o=atob(e.split(",")[1]),i=e.split(",")[0].split(":")[1].split(";")[0],n=new ArrayBuffer(o.length),a=new Uint8Array(n),r=0;r<o.length;r++)a[r]=o.charCodeAt(r);var l=new DataView(n);return new Blob([l.buffer],{type:t||i})},getExifOrientation:function(e,t){var o=new FileReader,i={1:0,2:-1,3:180,4:-180,5:-90,6:90,7:-270,8:270};o.onload=function(e){var o=new DataView(e.target.result),n=1;if(o.byteLength&&65496==o.getUint16(0,!1))for(var a=o.byteLength,r=2;r<a&&!(o.getUint16(r+2,!1)<=8);){var l=o.getUint16(r,!1);if(r+=2,65505==l){if(1165519206!=o.getUint32(r+=2,!1))break;var s,p=18761==o.getUint16(r+=6,!1);r+=o.getUint32(r+4,p),s=o.getUint16(r,p),r+=2;for(var d=0;d<s;d++)if(274==o.getUint16(r+12*d,p)){n=o.getUint16(r+12*d+8,p),a=0;break}}else{if(65280&~l)break;r+=o.getUint16(r,!1)}}t&&t(i[n]||0)},o.onerror=function(){t&&t("")},o.readAsArrayBuffer(e)},textParse:function(text,opts,noOptions){switch(opts=noOptions?opts||{}:$.extend({},{limit:n.limit,maxSize:n.maxSize,fileMaxSize:n.fileMaxSize,extensions:n.extensions?n.extensions.join(", "):null,captions:n.captions},opts),typeof text){case"string":for(var key in opts)["name","file","type","size"].indexOf(key)>-1&&(opts[key]=f._assets.escape(opts[key]));text=text.replace(/\$\{(.*?)\}/g,(function(match,a){var a=a.replace(/ /g,""),r=void 0!==opts[a]&&null!=opts[a]?opts[a]:"";if(["reader.node"].indexOf(a)>-1)return match;if(a.indexOf(".")>-1||a.indexOf("[]")>-1){var x=a.substr(0,a.indexOf(".")>-1?a.indexOf("."):a.indexOf("[")>-1?a.indexOf("["):a.length),y=a.substring(x.length);if(opts[x])try{r=eval('opts["'+x+'"]'+y)}catch(e){r=""}}return r=$.isFunction(r)?f._assets.textParse(r):r,r||""}));break;case"function":text=f._assets.textParse(text(opts,l,p,o,s,f._assets.textParse),opts,noOptions)}return opts=null,text},textToColor:function(e){if(!e||0==e.length)return!1;for(var t=0,o=0;t<e.length;o=e.charCodeAt(t++)+((o<<5)-o));t=0;for(var i="#";t<3;i+=("00"+(o>>2*t++&255).toString(16)).slice(-2));return i},isBrightColor:function(e){return function(e){var t,o,i=(t=e)&&t.constructor==Array&&3==t.length?t:(o=/rgb\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*\)/.exec(t))?[parseInt(o[1]),parseInt(o[2]),parseInt(o[3])]:(o=/rgb\(\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*\)/.exec(t))?[2.55*parseFloat(o[1]),2.55*parseFloat(o[2]),2.55*parseFloat(o[3])]:(o=/#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})/.exec(t))?[parseInt(o[1],16),parseInt(o[2],16),parseInt(o[3],16)]:(o=/#([a-fA-F0-9])([a-fA-F0-9])([a-fA-F0-9])/.exec(t))?[parseInt(o[1]+o[1],16),parseInt(o[2]+o[2],16),parseInt(o[3]+o[3],16)]:"undefined"!=typeof colors?colors[$.trim(t).toLowerCase()]:null;return i?.2126*i[0]+.7152*i[1]+.0722*i[2]:null}(e)>194},keyCompare:function(e,t){for(var o=0;o<t.length;o++)if(!$.isPlainObject(e)||!e.hasOwnProperty(t[o]))throw new Error('Could not find valid *strict* attribute "'+t[o]+'" in '+JSON.stringify(e,null,4));return!0},dialogs:{alert:n.dialogs.alert,confirm:n.dialogs.confirm},hasPlugin:function(e){if(navigator.plugins&&navigator.plugins.length)for(var t in navigator.plugins)if(navigator.plugins[t].name&&navigator.plugins[t].name.toLowerCase().indexOf(e)>-1)return!0;return!1},isIE:function(){return navigator.userAgent.indexOf("MSIE ")>-1||navigator.userAgent.indexOf("Trident/")>-1||navigator.userAgent.indexOf("Edge")>-1},isMobile:function(){return void 0!==window.orientation||-1!==navigator.userAgent.indexOf("IEMobile")},getDevice:{options:[],header:[navigator.platform,navigator.userAgent,navigator.appVersion,navigator.vendor,window.opera],dataos:[{name:"Windows Phone",value:"Windows Phone",version:"OS"},{name:"Windows",value:"Win",version:"NT"},{name:"iPhone",value:"iPhone",version:"OS"},{name:"iPad",value:"iPad",version:"OS"},{name:"Kindle",value:"Silk",version:"Silk"},{name:"Android",value:"Android",version:"Android"},{name:"PlayBook",value:"PlayBook",version:"OS"},{name:"BlackBerry",value:"BlackBerry",version:"/"},{name:"Macintosh",value:"Mac",version:"OS X"},{name:"Linux",value:"Linux",version:"rv"},{name:"Palm",value:"Palm",version:"PalmOS"}],databrowser:[{name:"Chrome",value:"Chrome",version:"Chrome"},{name:"Firefox",value:"Firefox",version:"Firefox"},{name:"Safari",value:"Safari",version:"Version"},{name:"Internet Explorer",value:"MSIE",version:"MSIE"},{name:"Opera",value:"Opera",version:"Opera"},{name:"BlackBerry",value:"CLDC",version:"CLDC"},{name:"Mozilla",value:"Mozilla",version:"Mozilla"}],init:function(){var e=this.header.join(" ");return{os:this.matchItem(e,this.dataos),browser:this.matchItem(e,this.databrowser)}},matchItem:function(e,t){var o,i,n,a=0,r=0;for(a=0;a<t.length;a+=1)if(new RegExp(t[a].value,"i").test(e)){if(o=new RegExp(t[a].version+"[- /:;]([\\d._]+)","i"),n="",(i=e.match(o))&&i[1]&&(i=i[1]),i)for(i=i.split(/[._]+/),r=0;r<i.length;r+=1)n+=0===r?i[r]+".":i[r];else n="0";return{name:t[a].name,version:parseFloat(n)}}return{name:"unknown",version:0}}}},isSupported:function(){return s&&s.get(0).files},isFileReaderSupported:function(){return window.File&&window.FileList&&window.FileReader},isDefaultMode:function(){return!(n.upload||n.addMore&&1!=n.limit)},isAddMoreMode:function(){return!n.upload&&n.addMore&&1!=n.limit},isUploadMode:function(){return n.upload},_itFl:[],_pfuL:[],_pfrL:[],disabled:!1,locked:!1,rendered:!1};return n.enableApi&&(s.get(0).FileUploader={open:function(){s.trigger("click")},getOptions:function(){return n},getParentEl:function(){return p},getInputEl:function(){return s},getNewInputEl:function(){return o},getListEl:function(){return l},getListInputEl:function(){return n.listInput},getFiles:function(){return f._itFl},getChoosedFiles:function(){return f._itFl.filter((function(e){return e.choosed}))},getAppendedFiles:function(){return f._itFl.filter((function(e){return e.appended}))},getUploadedFiles:function(){return f._itFl.filter((function(e){return e.uploaded}))},getFileList:function(e,t){return f.files.list(e,t,!0)},updateFileList:function(){return f.set("listInput",null),!0},setOption:function(e,t){return n[e]=t,!0},findFile:function(e){return f.files.find(e)},add:function(e,t,o){if(!f.isUploadMode())return!1;var i;if(e instanceof Blob)i=e;else{var n=/data:[a-z]+\/[a-z]+\;base64\,/.test(e)?e:"data:"+t+";base64,"+btoa(e);i=f._assets.dataURItoBlob(n,t)}return i._name=o||f._assets.generateFileName(-1!=i.type.indexOf("/")?i.type.split("/")[1].toString().toLowerCase():"File "),f.onChange(null,[i]),!0},append:function(e){return f.files.append(e)},update:function(e,t){return f.files.update(e,t)},remove:function(e){return e=e.jquery?f.files.find(e):e,f._itFl.indexOf(e)>-1&&(f.files.remove(e),!0)},uploadStart:function(){var e=this.getChoosedFiles()||[];if(f.isUploadMode()&&e.length>0&&!e[0].uploaded)for(var t=0;t<e.length;t++)f.upload.send(e[t])},reset:function(){return f.reset(!0),!0},disable:function(e){return f.set("disabled",!0),e&&(f.locked=!0),!0},enable:function(){return f.set("disabled",!1),f.locked=!1,!0},destroy:function(){return f.destroy(),!0},isEmpty:function(){return 0==f._itFl.length},isDisabled:function(){return f.disabled},isRendered:function(){return f.rendered},assets:f._assets,getPluginMode:function(){return f.isDefaultMode()?"default":f.isAddMoreMode()?"addMore":f.isUploadMode()?"upload":void 0}}),f.init(),this}))},$.fileuploader={getInstance:function(e){var t=e.prop?e:$(e);return t.length?t.get(0).FileUploader:null}},$.fn.fileuploader.languages={cz:{button:function(e){return"ProchÃ¡zet "+(1==e.limit?"soubor":"soubory")},feedback:function(e){return"Vyberte "+(1==e.limit?"soubor":"soubory")+", kterÃ½ chcete nahrÃ¡t"},feedback2:function(e){return e.length+" "+(e.length>1?"vybrÃ¡no souborÅ¯":"vybrÃ¡n soubor")},confirm:"Potvrdit",cancel:"ZruÅ¡eni",name:"JmÃ©no",type:"Format",size:"Velikost",dimensions:"RozmÄ›ry",duration:"TrvÃ¡nÃ­",crop:"OÅ™Ã­znout",rotate:"OtoÄit",sort:"RoztÅ™Ã­dit",open:"OtevÅ™Ã­t",download:"StÃ¡hnout",remove:"Odstranit",drop:"Pro nahrÃ¡nÃ­ pÅ™etahnÄ›te soubor sem",paste:'<div class="fileuploader-pending-loader"></div> VklÃ¡dÃ¡nÃ­ souboru, kliknÄ›te zde pro zruÅ¡eni',removeConfirmation:"Jste si jisti, Å¾e chcete odstranit tento soubor?",errors:{filesLimit:function(e){return"Pouze ${limit} "+(1==e.limit?"soubor mÅ¯Å¾e bÃ½t nahrÃ¡n":"soubory mohou byt nahranÃ©")+"."},filesType:"Pouze ${extensions} soubory mohou byt nahranÃ©.",fileSize:"${name} pÅ™Ã­liÅ¡ velkÃ½! ProsÃ­m, vyberte soubor do velikosti ${fileMaxSize} MB.",filesSizeAll:"VybranÃ½ soubor je pÅ™Ã­liÅ¡ velkÃ½! ProsÃ­m, vyberte soubor do velikosti ${maxSize} MB.",fileName:"Soubor s tÃ­mto nÃ¡zvem  ${name} byl uÅ¾ vybran.",remoteFile:"VzdÃ¡lenÃ© soubory nejsou povoleny.",folderUpload:"SloÅ¾ky nejsou povolenÃ©."}},de:{button:function(e){return(1==e.limit?"Datei":"Dateien")+" durchsuchen"},feedback:function(e){return(1==e.limit?"Datei":"Dateien")+" zum Hochladen auswÃ¤hlen"},feedback2:function(e){return e.length+" "+(1==e.length?"Datei":"Dateien")+" ausgewÃ¤hlt"},confirm:"Speichern",cancel:"SchlieÃŸen",name:"Name",type:"Typ",size:"GrÃ¶ÃŸe",dimensions:"Format",duration:"LÃ¤nge",crop:"Crop",rotate:"Rotieren",sort:"Sortieren",open:"Ã–ffnen",download:"Herunterladen",remove:"LÃ¶schen",drop:"Die Dateien hierher ziehen, um sie hochzuladen",paste:'<div class="fileuploader-pending-loader"></div> Eine Datei wird eingefÃ¼gt. Klicken Sie hier zum abzubrechen',removeConfirmation:"MÃ¶chten Sie diese Datei wirklich lÃ¶schen?",errors:{filesLimit:function(e){return"Nur ${limit} "+(1==e.limit?"Datei darf":"Dateien dÃ¼rfen")+" hochgeladen werden."},filesType:"Nur ${extensions} Dateien dÃ¼rfen hochgeladen werden.",fileSize:"${name} ist zu groÃŸ! Bitte wÃ¤hlen Sie eine Datei bis zu ${fileMaxSize} MB.",filesSizeAll:"Die ausgewÃ¤hlten Dateien sind zu groÃŸ! Bitte wÃ¤hlen Sie Dateien bis zu ${maxSize} MB.",fileName:"Eine Datei mit demselben Namen ${name} ist bereits ausgewÃ¤hlt.",remoteFile:"Remote-Dateien sind nicht zulÃ¤ssig.",folderUpload:"Ordner sind nicht erlaubt."}},dk:{button:function(e){return"Gennemse "+(1==e.limit?"fil":"filer")},feedback:function(e){return"VÃ¦lg "+(1==e.limit?"fil":"filer")+" til upload"},feedback2:function(e){return e.length+" "+(1==e.length?"fil":"filer")+" er valgt"},confirm:"BekrÃ¦ft",cancel:"Fortrydl",name:"Navn",type:"Type",size:"StÃ¸rrelse",dimensions:"Dimensioner",duration:"Varighedâ€™",crop:"Tilpas",rotate:"RotÃ©r",sort:"Sorter",open:"Ã…ben",download:"Hent",remove:"Slet",drop:"Drop filer her til upload",paste:"OverfÃ¸r fil, klik her for at afbryde",removeConfirmation:"Er du sikker pÃ¥, du Ã¸nsker at slette denne fil?",errors:{filesLimit:function(e){return"Du kan kun uploade ${limit} "+(1==e.limit?"fil":"filer")+" ad gangen."},filesType:"Det er kun tilladt at uploade ${extensions} filer.",fileSize:"${name} er for stor! VÃ¦lg venligst en fil pÃ¥ hÃ¸jst ${fileMaxSize} MB.",filesSizeAll:"De valgte filer er for store! VÃ¦lg venligst filer op til ${maxSize} MB ialt.",fileName:"Du har allerede valgt en fil med navnet ${name}.",remoteFile:"Fremmede filer er ikke tilladt.",folderUpload:"Mapper er ikke tilladt."}},en:{button:function(e){return"Browse "+(1==e.limit?"file":"files")},feedback:function(e){return"Choose "+(1==e.limit?"file":"files")+" to upload"},feedback2:function(e){return e.length+" "+(e.length>1?" files were":" file was")+" chosen"},confirm:"Confirm",cancel:"Cancel",name:"Name",type:"Type",size:"Size",dimensions:"Dimensions",duration:"Duration",crop:"Crop",rotate:"Rotate",sort:"Sort",open:"Open",download:"Download",remove:"Delete",drop:"Drop the files here to upload",paste:'<div class="fileuploader-pending-loader"></div> Pasting a file, click here to cancel',removeConfirmation:"Are you sure you want to delete this file?",errors:{filesLimit:function(e){return"Only ${limit} "+(1==e.limit?"file":"files")+" can be uploaded."},filesType:"Only ${extensions} files are allowed to be uploaded.",fileSize:"${name} is too large! Please choose a file up to ${fileMaxSize} MB.",filesSizeAll:"The chosen files are too large! Please select files up to ${maxSize} MB.",fileName:"A file with the same name ${name} is already selected.",remoteFile:"Remote files are not allowed.",folderUpload:"Folders are not allowed."}},es:{button:function(e){return"Examinar "+(1==e.limit?"archivo":"archivos")},feedback:function(e){return"Selecciona "+(e.limit,"archivos para subir")},feedback2:function(e){return e.length+" "+(e.length>1?"archivos seleccionados":"archivo seleccionado")},confirm:"Guardar",cancel:"Anular",name:"Nombre",type:"Tipo",size:"TamaÃ±o",dimensions:"Dimensiones",duration:"Duracion",crop:"Corta",rotate:"Rotar",sort:"Ordenar",open:"Abierto",download:"Descargar",remove:"Eliminar",drop:"Suelta los archivos aquÃ­ para subirlos",paste:'<div class="fileuploader-pending-loader"></div> Pegar un archivo, haga clic aquÃ­ para cancelar',removeConfirmation:"Â¿EstÃ¡s seguro de que deseas eliminar este archivo?",errors:{filesLimit:function(e){return"Solo se pueden seleccionar ${limit} "+(1==e.limit?"archivo":"archivos")+"."},filesType:"Solo se pueden seleccionar archivos ${extensions}.",fileSize:"${name} es demasiado grande! Por favor, seleccione un archivo hasta ${fileMaxSize} MB.",filesSizeAll:"Â¡Los archivos seleccionados son demasiado grandes! Por favor seleccione archivos de hasta ${maxSize} MB.",fileName:"Un archivo con el mismo nombre ${name} ya estÃ¡ seleccionado.",remoteFile:"Los archivos remotos no estÃ¡n permitidos.",folderUpload:"No se permiten carpetas."}},fr:{button:function(e){return"Parcourir "+(1==e.limit?"le fichier":"les fichiers")},feedback:function(e){return"Choisir "+(1==e.limit?"le fichier ":"les fichiers")+" Ã  tÃ©lÃ©charger"},feedback2:function(e){return e.length+" "+(e.length>1?"fichiers ont Ã©tÃ© choisis":"fichier a Ã©tÃ© choisi")},confirm:"Confirmer",cancel:"Annuler",name:"Nom",type:"Type",size:"Taille",dimensions:"Dimensions",duration:"DurÃ©e",crop:"Recadrer",rotate:"Pivoter",sort:"Trier",download:"TÃ©lÃ©charger",remove:"Supprimer",drop:"DÃ©posez les fichiers ici pour les tÃ©lÃ©charger",paste:'<div class="fileuploader-pending-loader"></div> Collant un fichier, cliquez ici pour annuler.',removeConfirmation:"ÃŠtes-vous sÃ»r de vouloir supprimer ce fichier ?",errors:{filesLimit:"Seuls les fichiers ${limit} peuvent Ãªtre tÃ©lÃ©chargÃ©s.",filesType:"Seuls les fichiers ${extensions} peuvent Ãªtre tÃ©lÃ©chargÃ©s.",fileSize:"${name} est trop lourd, la limite est de ${fileMaxSize} MB.",filesSizeAll:"Les fichiers que vous avez choisis sont trop lourd, la limite totale est de ${maxSize} MB.",fileName:"Le fichier portant le nom ${name} est dÃ©jÃ  sÃ©lectionnÃ©.",folderUpload:"Vous n'Ãªtes pas autorisÃ© Ã  tÃ©lÃ©charger des dossiers."}},it:{button:function(e){return"Sfoglia"+(1==e.limit?"il file":"i file")},feedback:function(e){return"Seleziona "+(1==e.limit?"file":"i file")+" per caricare"},feedback2:function(e){return e.length+" "+(e.length>1?"i file sono scelti":"il file Ã¨ scelto")},confirm:"Conferma",cancel:"Cancella",name:"Nome",type:"Tipo file",size:"Dimensione file",dimensions:"Dimensioni",duration:"Durata",crop:"Taglia",rotate:"Ruota",sort:"Ordina",open:"Apri",download:"Scarica",remove:"Elimina",drop:"Posiziona il file qui per caricare",paste:'<div class="fileuploader-pending-loader"></div> Incolla file, clicca qui per cancellare',removeConfirmation:"Sei sicuro di voler eliminare il file?",errors:{filesLimit:"Solo ${limit} file possono essere caricati.",filesType:"Solo ${extensions} file possono essere caricati.",fileSize:"${name} Ã¨ troppo grande! Scegli un file fino a ${fileMaxSize} MB.",filesSizeAll:"I file selezioni sono troppo grandi! Scegli un file fino a ${maxSize} MB.",fileName:"Un file con lo stesso nome ${name} Ã¨ giÃ  selezionato.",remoteFile:"I file remoti non sono consentiti.",folderUpload:"Le cartelle non sono consentite."}},lv:{button:function(e){return"IzvÄ“lieties "+(1==e.limit?"fails":"faili")},feedback:function(e){return"IzvÄ“liejaties "+(1==e.limit?"fails":"faili")+" lejupielÄdÄ“t"},feedback2:function(e){return e.length+" "+(e.length>1?"failus izvelÄ“ts":"fails izvÄ“lÄ“ts")},confirm:"SaglabÄt",cancel:"Atcelt",name:"VÄrds",type:"FormÄts",size:"IzmÄ“rs",dimensions:"IzmÄ“ri",duration:"Ilgums",crop:"Nogriezt",rotate:"Pagriezt",sort:"KÄrtot",open:"AtvÄ“rt",download:"LejupielÄdÄ“t",remove:"DzÄ“st",drop:"Lai augÅ¡upielÄdÄ“tu, velciet failus Å¡eit",paste:'<div class="fileuploader-pending-loader"></div> Ievietojiet failu, noklikÅ¡Ä·iniet Å¡eit, lai atceltu',removeConfirmation:"Vai tieÅ¡Äm vÄ“laties izdzÄ“st Å¡o failu?",errors:{filesLimit:function(e){return"Tikai ${limit} "+(1==e.limit?"failu var augÅ¡upielÄdÄ“t":"failus var augÅ¡upielÄdÄ“t")+"."},filesType:"Tikai ${extensions} failus var augÅ¡upielÄdÄ“t.",fileSize:"${name} ir par lielu! LÅ«dzu, atlasiet failu lÄ«dz ${fileMaxSize} MB.",filesSizeAll:"AtlasÄ«tie faili ir pÄrÄk lieli! LÅ«dzu, atlasiet failus lÄ«dz ${maxSize} MB.",fileName:"Fails ar tÄdu paÅ¡u nosaukumu ${name} jau ir atlasÄ«ts.",remoteFile:"AttÄlie faili nav atÄ¼auti.",folderUpload:"Mapes nav atÄ¼autas."}},nl:{button:function(e){return(1==e.limit?"Bestand":"Bestanden")+" kiezen"},feedback:function(e){return"Kies "+(1==e.limit?"een bestand":"bestanden")+" om te uploaden"},feedback2:function(e){return e.length+" "+(e.length>1?"bestanden":"bestand")+" gekozen"},confirm:"Opslaan",cancel:"Annuleren",name:"Naam",type:"Type",size:"Grootte",dimensions:"Afmetingen",duration:"Duur",crop:"Uitsnijden",rotate:"Draaien",sort:"Sorteren",open:"Open",download:" Downloaden",remove:"Verwijderen",drop:"Laat de bestanden hier vallen om te uploaden",paste:'<div class="fileuploader-pending-loader"></div> Een bestand wordt geplakt, klik hier om te annuleren',removeConfirmation:"Weet u zeker dat u dit bestand wilt verwijderen?",errors:{filesLimit:function(e){return"Er "+(1==e.limit?"mag":"mogen")+" slechts ${limit} "+(1==e.limit?"bestand":"bestanden")+" worden geÃ¼pload."},filesType:"Alleen ${extensions} mogen worden geÃ¼pload.",fileSize:"${name} is te groot! Kies een bestand tot ${fileMaxSize} MB.",filesSizeAll:"De gekozen bestanden zijn te groot! Kies bestanden tot ${maxSize} MB.",fileName:"Een bestand met dezelfde naam ${name} is al gekozen.",remoteFile:"Externe bestanden zijn niet toegestaan.",folderUpload:"Mappen zijn niet toegestaan."}},pl:{button:function(e){return"Wybierz "+(1==e.limit?"plik":"pliki")},feedback:function(e){return"Wybierz "+(1==e.limit?"plik":"pliki")+" do przesÅ‚ania"},feedback2:function(e){return e.length+" "+(e.length>1?"pliki zostaÅ‚y wybrane":"plik zostaÅ‚ wybrany")},confirm:"PotwierdÅº",cancel:"Anuluj",name:"Nazwa",type:"Typ",size:"Rozmiar",dimensions:"Wymiary",duration:"Czas trwania",crop:"Przytnij",rotate:"ObrÃ³Ä‡",sort:"Sortuj",open:"OtwÃ³rz",download:"Pobierz",remove:"UsuÅ„",drop:"UpuÅ›Ä‡ pliki tutaj do przesÅ‚ania",paste:'<div class="fileuploader-pending-loader"></div> WklejajÄ…c plik, kliknij tutaj, aby anulowaÄ‡',removeConfirmation:"Czy jesteÅ› pewien, Å¼e chcesz usunÄ…Ä‡ ten plik?",errors:{filesLimit:function(e){return"Tylko ${limit} "+(1==e.limit?"plik":"pliki")+" moÅ¼na wybraÄ‡."},filesType:"Tylko pliki ${extensions} mogÄ… zostaÄ‡ pobrane.",fileSize:"Plik ${name} jest za duÅ¼y! ProszÄ™ wybraÄ‡ plik do ${fileMaxSize} MB.",filesSizeAll:"Wybrane pliki sÄ… za duÅ¼e! ProszÄ™ wybraÄ‡ pliki do  ${maxSize} MB.",fileName:", Plik o tej samej nazwie ${name} juÅ¼ zostaÅ‚ wybrany.",remoteFile:"Zdalne pliki nie sÄ… dozwolone.",folderUpload:"Foldery nie sÄ… dozwolone."}},pt:{button:function(e){return"Escolher "+(1==e.limit?"arquivo":"arquivos")},feedback:function(e){return"Escolha "+(1==e.limit?"arquivo":"arquivos")+" a carregar"},feedback2:function(e){return e.length+" "+(e.length>1?"arquivos foram escolhidos":"arquivo foi escolhido")},confirm:"Confirmar",cancel:"Cancelar",name:"Nome",type:"Tipo",size:"Tamanho",dimensions:"DimensÃµes",duration:"DuraÃ§Ã£o",crop:"Recorte",rotate:"Girar",sort:"Ordenar",open:"Abrir",download:"Baixar",remove:"Excluir",drop:"Solte os arquivos aqui para fazer o upload",paste:'<div class="fileuploader-pending-loader"></div> Colando um arquivo, clique aqui para cancelar',removeConfirmation:"Tem certeza de que deseja excluir este arquivo?",errors:{filesLimit:function(e){return"Apenas ${limit} "+(1==e.limit?"arquivo a ser carregado":"arquivos a serem carregados")+"."},filesType:"Somente arquivos ${extensions} podem ser carregados.",fileSize:"${name} Ã© muito grande! Selecione um arquivo de atÃ© ${fileMaxSize} MB.",filesSizeAll:"Os arquivos selecionados sÃ£o muito grandes! Selecione arquivos de atÃ© ${maxSize} MB.",fileName:"Um arquivo com o mesmo nome ${name} jÃ¡ estÃ¡ selecionado.",remoteFile:"Arquivos remotos nÃ£o sÃ£o permitidos.",folderUpload:"Pastas nÃ£o sÃ£o permitidas."}},ro:{button:function(e){return"AtaÈ™eazÄƒ "+(1==e.limit?"fiÈ™ier":"fiÈ™iere")},feedback:function(e){return"SelecteazÄƒ "+(1==e.limit?"fiÈ™ier":"fiÈ™iere")+" pentru Ã®ncÄƒrcare"},feedback2:function(e){return e.length+" "+(e.length>1?" fiÈ™iere":" fiÈ™ier")+" selectate"},confirm:"ConfirmÄƒ",cancel:"AnuleazÄƒ",name:"Nume",type:"Tip",size:"MÄƒrimea",dimensions:"Dimensiunea",duration:"Durata",crop:"Crop",rotate:"Rotire",sort:"Sortare",open:"Deschide",download:"Download",remove:"È˜terge",drop:"AruncaÈ›i fiÈ™ierele aici pentru a le Ã®ncÄƒrca",paste:'<div class="fileuploader-pending-loader"></div> Se ataÈ™eazÄƒ fiÈ™ier, faceÈ›i click aici pentru anulare',removeConfirmation:"Sigur doriÈ›i sÄƒ È™tergeÈ›i acest fiÈ™ier?",errors:{filesLimit:function(e){return"Doar ${limit} "+(1==e.limit?"fiÈ™ier poate fi selectat":"fiÈ™iere pot fi selectat")+"."},filesType:"Doar fiÈ™ierele ${extensions} pot fi Ã®ncÄƒrcate.",fileSize:"${name} este prea mare! VÄƒ rugÄƒm sÄƒ selectaÈ›i un fiÈ™ier pÃ¢nÄƒ la ${fileMaxSize} MB.",filesSizeAll:"FiÈ™ierele selectate sunt prea mari! VÄƒ rugÄƒm sÄƒ selectaÈ›i fiÈ™iere pÃ¢nÄƒ la ${maxSize} MB.",fileName:"FiÈ™ierul cu acelaÈ™i numele ${nume} a fost deja selectat.",remoteFile:"FiÈ™ierele remote nu sunt permise.",folderUpload:"Folderele nu sunt permise."}},ru:{button:function(e){return"Ð’Ñ‹Ð±Ñ€Ð°Ñ‚ÑŒ "+(1==e.limit?"Ñ„Ð°Ð¹Ð»":"Ñ„Ð°Ð¹Ð»Ñ‹")},feedback:function(e){return"Ð’Ñ‹Ð±ÐµÑ€Ð¸Ñ‚Ðµ "+(1==e.limit?"Ñ„Ð°Ð¹Ð»":"Ñ„Ð°Ð¹Ð»Ñ‹")+" Ð´Ð»Ñ Ð·Ð°Ð³Ñ€ÑƒÐ·ÐºÐ¸"},feedback2:function(e){return e.length+" "+(e.length>1?"Ñ„Ð°Ð¹Ð»Ð¾Ð² Ð²Ñ‹Ð±Ñ€Ð°Ð½Ð¾":"Ñ„Ð°Ð¹Ð» Ð²Ñ‹Ð±Ñ€Ð°Ð½")},confirm:"Ð¡Ð¾Ñ…Ñ€Ð°Ð½Ð¸Ñ‚ÑŒ",cancel:"ÐžÑ‚Ð¼ÐµÐ½Ð°",name:"Ð˜Ð¼Ñ",type:"Ð¤Ð¾Ñ€Ð¼Ð°Ñ‚",size:"Ð Ð°Ð·Ð¼ÐµÑ€",dimensions:"Ð Ð°Ð·Ð¼ÐµÑ€Ñ‹",duration:"Ð”Ð»Ð¸Ñ‚ÐµÐ»ÑŒÐ½Ð¾ÑÑ‚ÑŒ",crop:"ÐžÐ±Ñ€ÐµÐ·Ð°Ñ‚ÑŒ",rotate:"ÐŸÐ¾Ð²ÐµÑ€Ð½ÑƒÑ‚ÑŒ",sort:"Ð¡Ð¾Ñ€Ñ‚Ð¸Ñ€Ð¾Ð²Ñ‚ÑŒ",open:"ÐžÑ‚ÐºÑ€Ñ‹Ñ‚ÑŒ",download:"Ð¡ÐºÐ°Ñ‡Ð°Ñ‚ÑŒ",remove:"Ð£Ð´Ð°Ð»Ð¸Ñ‚ÑŒ",drop:"ÐŸÐµÑ€ÐµÑ‚Ð°Ñ‰Ð¸Ñ‚Ðµ Ñ„Ð°Ð¹Ð»Ñ‹ ÑÑŽÐ´Ð° Ð´Ð»Ñ Ð·Ð°Ð³Ñ€ÑƒÐ·ÐºÐ¸",paste:'<div class="fileuploader-pending-loader"></div> Ð’ÑÑ‚Ð°Ð²ÐºÐ° Ñ„Ð°Ð¹Ð»Ð°, Ð½Ð°Ð¶Ð¼Ð¸Ñ‚Ðµ Ð·Ð´ÐµÑÑŒ, Ñ‡Ñ‚Ð¾Ð±Ñ‹ Ð¾Ñ‚Ð¼ÐµÐ½Ð¸Ñ‚ÑŒ',removeConfirmation:"Ð’Ñ‹ ÑƒÐ²ÐµÑ€ÐµÐ½Ñ‹, Ñ‡Ñ‚Ð¾ Ñ…Ð¾Ñ‚Ð¸Ñ‚Ðµ ÑƒÐ´Ð°Ð»Ð¸Ñ‚ÑŒ ÑÑ‚Ð¾Ñ‚ Ñ„Ð°Ð¹Ð»?",errors:{filesLimit:function(e){return"Ð¢Ð¾Ð»ÑŒÐºÐ¾ ${limit} "+(1==e.limit?"Ñ„Ð°Ð¹Ð» Ð¼Ð¾Ð¶ÐµÑ‚ Ð±Ñ‹Ñ‚ÑŒ Ð·Ð°Ð³Ñ€ÑƒÐ¶ÐµÐ½":"Ñ„Ð°Ð¹Ð»Ð¾Ð² Ð¼Ð¾Ð³ÑƒÑ‚ Ð±Ñ‹Ñ‚ÑŒ Ð·Ð°Ð³Ñ€ÑƒÐ¶ÐµÐ½Ñ‹")+"."},filesType:"Ð¢Ð¾Ð»ÑŒÐºÐ¾ ${extensions} Ñ„Ð°Ð¹Ð»Ñ‹ Ð¼Ð¾Ð³ÑƒÑ‚ Ð±Ñ‹Ñ‚ÑŒ Ð·Ð°Ð³Ñ€ÑƒÐ¶ÐµÐ½Ñ‹.",fileSize:"${name} ÑÐ»Ð¸ÑˆÐºÐ¾Ð¼ Ð±Ð¾Ð»ÑŒÑˆÐ¾Ð¹! ÐŸÐ¾Ð¶Ð°Ð»ÑƒÐ¹ÑÑ‚Ð°, Ð²Ñ‹Ð±ÐµÑ€Ð¸Ñ‚Ðµ Ñ„Ð°Ð¹Ð» Ð´Ð¾ ${fileMaxSize} ÐœÐ‘.",filesSizeAll:"Ð’Ñ‹Ð±Ñ€Ð°Ð½Ð½Ñ‹Ðµ Ñ„Ð°Ð¹Ð»Ñ‹ ÑÐ»Ð¸ÑˆÐºÐ¾Ð¼ Ð±Ð¾Ð»ÑŒÑˆÐ¸Ðµ! ÐŸÐ¾Ð¶Ð°Ð»ÑƒÐ¹ÑÑ‚Ð°, Ð²Ñ‹Ð±ÐµÑ€Ð¸Ñ‚Ðµ Ñ„Ð°Ð¹Ð»Ñ‹ Ð´Ð¾ ${maxSize} ÐœÐ‘.",fileName:"Ð¤Ð°Ð¹Ð» Ñ Ñ‚Ð°ÐºÐ¸Ð¼ Ð¸Ð¼ÐµÐ½ÐµÐ¼ ${name} ÑƒÐ¶Ðµ Ð²Ñ‹Ð±Ñ€Ð°Ð½.",remoteFile:"Ð£Ð´Ð°Ð»ÐµÐ½Ð½Ñ‹Ðµ Ñ„Ð°Ð¹Ð»Ñ‹ Ð½Ðµ Ð´Ð¾Ð¿ÑƒÑÐºÐ°ÑŽÑ‚ÑÑ.",folderUpload:"ÐŸÐ°Ð¿ÐºÐ¸ Ð½Ðµ Ð´Ð¾Ð¿ÑƒÑÐºÐ°ÑŽÑ‚ÑÑ."}},tr:{button:function(e){return(1==e.limit?"Dosya":"DosyalarÄ±")+" seÃ§"},feedback:function(e){return"YÃ¼klemek istediÄŸiniz "+(1==e.limit?"dosyayÄ±":"dosyalarÄ±")+" seÃ§in."},feedback2:function(e){return e.length+" "+(e.length>1?"dosyalar":"dosya")+" seÃ§ildi."},confirm:"Onayla",cancel:"Ä°ptal",name:"Ä°sim",type:"Tip",size:"Boyut",dimensions:"Boyutlar",duration:"SÃ¼re",crop:"KÄ±rp",rotate:"DÃ¶ndÃ¼r",sort:"SÄ±rala",open:"AÃ§",download:"Ä°ndir",remove:"Sil",drop:"YÃ¼klemek iÃ§in dosyalarÄ± buraya bÄ±rakÄ±n",paste:'<div class="fileuploader-pending-loader"></div> Bir dosyayÄ± yapÄ±ÅŸtÄ±rmak veya iptal etmek iÃ§in buraya tÄ±klayÄ±n',removeConfirmation:"Bu dosyayÄ± silmek istediÄŸinizden emin misiniz?",errors:{filesLimit:function(e){return"Sadece ${limit} "+(1==e.limit?"dosya":"dosyalar")+" yÃ¼klenmesine izin verilir."},filesType:"Sadece ${extensions} dosyalarÄ±n yÃ¼klenmesine izin verilir.",fileSize:"${name} Ã§ok bÃ¼yÃ¼k! LÃ¼tfen ${fileMaxSize} MB'a kadar bir dosya seÃ§in.",filesSizeAll:"SeÃ§ilen dosyalar Ã§ok bÃ¼yÃ¼k! LÃ¼tfen ${maxSize} MB'a kadar dosyalarÄ± seÃ§in",fileName:"AynÄ± ada sahip bir dosya ${name} zaten seÃ§ilmiÅŸtir.",remoteFile:"Uzak dosyalara izin verilmez.",folderUpload:"KlasÃ¶rlere izin verilmez."}}},$.fn.fileuploader.defaults={limit:null,maxSize:null,fileMaxSize:null,extensions:null,disallowedExtensions:null,changeInput:!0,inputNameBrackets:!0,theme:"default",thumbnails:{box:'<div class="fileuploader-items"><ul class="fileuploader-items-list"></ul></div>',boxAppendTo:null,item:'<li class="fileuploader-item"><div class="columns"><div class="column-thumbnail">${image}<span class="fileuploader-action-popup"></span></div><div class="column-title"><div title="${name}">${name}</div><span>${size2}</span></div><div class="column-actions"><button type="button" class="fileuploader-action fileuploader-action-remove" title="${captions.remove}"><i class="fileuploader-icon-remove"></i></a></div></div><div class="progress-bar2">${progressBar}<span></span></div></li>',item2:'<li class="fileuploader-item"><div class="columns"><div class="column-thumbnail">${image}<span class="fileuploader-action-popup"></span></div><div class="column-title"><a href="${file}" target="_blank"><div title="${name}">${name}</div><span>${size2}</span></a></div><div class="column-actions"><a href="${data.url}" class="fileuploader-action fileuploader-action-download" title="${captions.download}" download><i class="fileuploader-icon-download"></i></a><button type="button" class="fileuploader-action fileuploader-action-remove" title="${captions.remove}"><i class="fileuploader-icon-remove"></i></a></div></div></li>',popup:{container:"body",loop:!0,arrows:!0,zoomer:!0,template:function(e){return'<div class="fileuploader-popup-preview"><button type="button" class="fileuploader-popup-move" data-action="prev"><i class="fileuploader-icon-arrow-left"></i></button><div class="fileuploader-popup-node node-${format}">${reader.node}</div><div class="fileuploader-popup-content"><div class="fileuploader-popup-footer"><ul class="fileuploader-popup-tools">'+("image"==e.format&&e.reader.node&&e.editor?(e.editor.cropper?'<li><button type="button" data-action="crop"><i class="fileuploader-icon-crop"></i> ${captions.crop}</button></li>':"")+(e.editor.rotate?'<li><button type="button" data-action="rotate-cw"><i class="fileuploader-icon-rotate"></i> ${captions.rotate}</button></li>':""):"")+("image"==e.format?'<li class="fileuploader-popup-zoomer"><button type="button" data-action="zoom-out">&minus;</button><input type="range" min="0" max="100"><button type="button" data-action="zoom-in">&plus;</button><span></span> </li>':"")+(e.data.url?'<li><a href="'+e.data.url+'" data-action="open" target="_blank"><i class="fileuploader-icon-external"></i> ${captions.open}</a></li>':"")+'<li><button type="button" data-action="remove"><i class="fileuploader-icon-trash"></i> ${captions.remove}</button></li></ul></div><div class="fileuploader-popup-header"><ul class="fileuploader-popup-meta"><li><span>${captions.name}:</span><h5>${name}</h5></li><li><span>${captions.type}:</span><h5>${extension.toUpperCase()}</h5></li><li><span>${captions.size}:</span><h5>${size2}</h5></li>'+(e.reader&&e.reader.width?"<li><span>${captions.dimensions}:</span><h5>${reader.width}x${reader.height}px</h5></li>":"")+(e.reader&&e.reader.duration?"<li><span>${captions.duration}:</span><h5>${reader.duration2}</h5></li>":"")+'</ul><div class="fileuploader-popup-info"></div><ul class="fileuploader-popup-buttons"><li><button type="button" class="fileuploader-popup-button" data-action="cancel">${captions.cancel}</a></li>'+(e.editor?'<li><button type="button" class="fileuploader-popup-button button-success" data-action="save">${captions.confirm}</button></li>':"")+'</ul></div></div><button type="button" class="fileuploader-popup-move" data-action="next"><i class="fileuploader-icon-arrow-right"></i></button></div>'},onShow:function(e){e.popup.html.on("click",'[data-action="remove"]',(function(t){e.popup.close(),e.remove()})).on("click",'[data-action="cancel"]',(function(t){e.popup.close()})).on("click",'[data-action="save"]',(function(t){e.editor&&e.editor.save(),e.popup.close&&e.popup.close()}))},onHide:null},itemPrepend:!1,removeConfirmation:!0,startImageRenderer:!0,synchronImages:!0,useObjectUrl:!1,canvasImage:!0,videoThumbnail:!0,pdf:!0,exif:!1,touchDelay:0,_selectors:{list:".fileuploader-items-list",item:".fileuploader-item",start:".fileuploader-action-start",retry:".fileuploader-action-retry",remove:".fileuploader-action-remove",sorter:".fileuploader-action-sort",rotate:".fileuploader-action-rotate",popup:".fileuploader-popup-preview",popup_open:".fileuploader-action-popup"},beforeShow:null,onItemShow:null,onItemRemove:function(e){e.children().animate({opacity:0},200,(function(){setTimeout((function(){e.slideUp(200,(function(){e.remove()}))}),100)}))},onImageLoaded:null},editor:!1,sorter:!1,reader:{thumbnailTimeout:5e3,timeout:12e3,maxSize:20},files:null,upload:null,dragDrop:!0,addMore:!1,skipFileNameCheck:!1,clipboardPaste:!0,listInput:!0,enableApi:!1,listeners:null,onSupportError:null,beforeRender:null,afterRender:null,beforeSelect:null,onFilesCheck:null,onFileRead:null,onSelect:null,afterSelect:null,onListInput:null,onRemove:null,onEmpty:null,dialogs:{alert:function(e){return alert(e)},confirm:function(e,t){confirm(e)&&t()}},captions:$.fn.fileuploader.languages.en}})),function(e){e((function(){void 0!==fileUploaderCommonConfig.avatar&&e(".ulp_avatar_upload_field").fileuploader({limit:2,extensions:["image/*"],fileMaxSize:fileUploaderCommonConfig.avatar.maxSize,changeInput:" ",theme:"avatar",addMore:!0,enableApi:!0,thumbnails:{box:'<div class="fileuploader-wrapper"><div class="fileuploader-items"></div><div class="fileuploader-droparea" data-action="fileuploader-input"><i class="'+fileUploaderCommonConfig.avatar.icons.menu+'"></i></div></div><div class="fileuploader-menu"><button type="button" class="fileuploader-menu-open"><i class="'+fileUploaderCommonConfig.avatar.icons.menu+'"></i></button><ul><li><a data-action="fileuploader-input"><i class="'+fileUploaderCommonConfig.avatar.icons.upload+'"></i> ${captions.upload}</a></li><li><a data-action="fileuploader-edit"><i class="'+fileUploaderCommonConfig.avatar.icons.edit+'"></i> ${captions.edit}</a></li><li><a data-action="fileuploader-remove"><i class="'+fileUploaderCommonConfig.avatar.icons.remove+'"></i> ${captions.remove}</a></li>'+(void 0!==fileUploaderCommonConfig.avatar.url.logout?'<li><a data-action="fileuploader-logout" href="'+fileUploaderCommonConfig.avatar.url.logout+'"><i class="'+fileUploaderCommonConfig.avatar.icons.logout+'"></i> ${captions.logout}</a></li>':"")+"</ul></div>",item:'<div class="fileuploader-item">${image}<span class="fileuploader-action-popup" data-action="fileuploader-edit"></span><div class="progressbar3" style="display: none"></div></div>',item2:null,itemPrepend:!0,startImageRenderer:!0,canvasImage:!1,_selectors:{list:".fileuploader-items"},popup:{arrows:!1,onShow:function(e){e.popup.html.addClass("is-for-avatar"),e.popup.html.on("click",'[data-action="remove"]',(function(t){e.popup.close(),e.remove()})).on("click",'[data-action="cancel"]',(function(t){e.popup.close()})).on("click",'[data-action="save"]',(function(t){e.editor&&!e.isSaving&&(e.isSaving=!0,e.editor.save()),e.popup.close&&e.popup.close()}))},onHide:function(e){e.isSaving||e.uploaded||e.appended||(e.popup.close=null,e.remove())}},onItemShow:function(e){e.choosed&&e.html.addClass("is-image-waiting")},onImageLoaded:function(e,t,o,i,n){e.choosed&&!e.isSaving?e.reader.node&&e.reader.width>=256&&e.reader.height>=256?(e.image.hide(),e.popup.open(),e.editor.cropper()):(e.remove(),alert("The image is too small!")):e.data.isDefault?e.html.addClass("is-default"):e.image.hasClass("fileuploader-no-thumbnail")&&e.html.hide()},onItemRemove:function(e){e.fadeOut(250,(function(){e.remove()}))}},dragDrop:{container:".fileuploader-wrapper"},editor:{maxWidth:fileUploaderCommonConfig.avatar.maxWidth,maxHeight:fileUploaderCommonConfig.avatar.maxWidth,quality:fileUploaderCommonConfig.avatar.quality,cropper:{showGrid:!1,ratio:"1:1",minWidth:256,minHeight:256},onSave:function(t,o,i,n,a,r){var l=e.fileuploader.getInstance(r);if(t)if(o.editor._blob=l.assets.dataURItoBlob(t,o.type),o.upload){if(2==l.getFiles().length&&(l.getFiles()[0].data.isDefault||l.getFiles()[0].upload)&&l.getFiles()[0].remove(),n.find(".fileuploader-menu ul a").show(),o.upload.send)return o.upload.send();if(o.upload.resend)return o.upload.resend()}else if(o.appended){var s=new FormData;o.image.addClass("fileuploader-loading").html(""),o.html.find(".fileuploader-action-popup").hide(),n.find('[data-action="fileuploader-edit"]').hide(),s.append(r.attr("name"),o.editor._blob),s.append("action","ulp_avatar"),s.append("security",fileUploaderCommonConfig.Nonce),s.append("fileuploader",!0),s.append("name",o.name),s.append("method","edit"),s.append("editing",!0),e.ajax({url:l.getOptions().upload.url,data:s,type:"POST",processData:!1,contentType:!1}).always((function(){delete o.isSaving,o.reader.read((function(){o.html.find(".fileuploader-action-popup").show(),n.find('[data-action="fileuploader-edit"]').show(),o.popup.html=o.popup.node=o.popup.editor=o.editor.crop=o.editor.rotation=o.popup.zoomer=null,o.renderThumbnail()}),null,!0)}))}}},upload:{url:fileUploaderCommonConfig.AjaxUrl,data:null,type:"POST",enctype:"multipart/form-data",start:!1,beforeSend:function(e,t,o,i,n){e.upload.formData=new FormData,e.editor&&e.editor._blob&&(e.upload.data.action="ulp_avatar",e.upload.data.security=fileUploaderCommonConfig.Nonce,e.upload.data.method="upload",e.upload.data.fileuploader=1,e.upload.data.name=e.name,e.upload.data.editing=e.uploaded,e.upload.formData.append(n.attr("name"),e.editor._blob,e.name)),e.image.hide(),e.html.removeClass("upload-complete"),o.find('[data-action="fileuploader-edit"]').hide(),this.onProgress({percentage:0},e)},onSuccess:function(t,o,i,n,a,r){var l=e.fileuploader.getInstance(r),s=o.html.find(".progressbar3"),p={};if(t&&t.files?p=t:p.hasWarnings=!0,l.getFiles().length>1&&l.getFiles()[0].remove(),p.isSuccess&&p.files[0]&&(o.name=p.files[0].name),p.hasWarnings){for(var d in p.warnings)e(document.body).WordpressUlikeNotifications({messageType:"warning",messageText:p.warnings[d]});return o.html.removeClass("upload-successful").addClass("upload-failed"),this.onError?this.onError(o):null}delete o.isSaving,o.html.addClass("upload-complete").removeClass("is-image-waiting"),s.find("span").html('<i class="'+fileUploaderCommonConfig.avatar.icons.complete+'"></i>'),n.find('[data-action="fileuploader-edit"]').show(),setTimeout((function(){s.fadeOut(450)}),1250),o.image.fadeIn(250)},onError:function(e,t,o,i,n){var a=e.html.find(".progressbar3");e.html.addClass("upload-complete"),"cancelled"!=e.upload.status&&a.find("span").attr("data-action","fileuploader-retry").html('<i class="'+fileUploaderCommonConfig.avatar.icons.retry+'"></i>')},onProgress:function(e,t){var o=t.html.find(".progressbar3");0==e.percentage?o.addClass("is-reset").fadeIn(250).html(""):e.percentage>=99?e.percentage=100:o.removeClass("is-reset"),o.children().length||o.html('<span></span><svg><circle class="progress-dash"></circle><circle class="progress-circle"></circle></svg>');var i=o.find("span"),n=o.find("svg"),a=n.find(".progress-circle"),r=Math.max(60,t.html.height()/2),l=Math.round(r/2.28),s=2*l*Math.PI,p=s-e.percentage/100*s;n.find("circle").attr({r:l,cx:r,cy:r}),a.css({strokeDasharray:s+" "+s,strokeDashoffset:p}),i.html(e.percentage+"%")},onComplete:null},afterRender:function(t,o,i,n){var a=e.fileuploader.getInstance(n);function r(){if(o.closest(".wp-ulike-pro-section-profile").length){var t=e(".fileuploader-theme-avatar").parent().width();e(".fileuploader-theme-avatar").width(t),e(".fileuploader-theme-avatar").height(t)}}n.removeAttr("multiple"),a.getOptions().dragDrop.container=o.find(".fileuploader-wrapper"),a.isDisabled()&&o.find(".fileuploader-menu").remove(),o.on("click","[data-action]",(function(){var t=e(this),o=t.attr("data-action"),i=a.getFiles().length?a.getFiles()[a.getFiles().length-1]:null;switch(o){case"fileuploader-input":a.open();break;case"fileuploader-edit":i&&i.popup&&(t.is(".fileuploader-action-popup")||i.popup.open(),i.editor.cropper());break;case"fileuploader-retry":i&&i.upload.retry&&i.upload.retry();break;case"fileuploader-remove":i&&(i.removeMeta=!0,i.remove())}})),e("body").on("click",(function(t){var o=e(t.target),i=o.closest(".fileuploader");e(".fileuploader-menu").removeClass("is-shown"),(o.is(".fileuploader-menu-open")||o.closest(".fileuploader-menu-open").length)&&i.find(".fileuploader-menu").addClass("is-shown")})),r(),e(window).on("resize scroll",(function(e){r()}))},onEmpty:function(t,o,i,n){var a=e.fileuploader.getInstance(n),r=n.attr("data-fileuploader-default");r&&!t.find("> .is-default").length&&a.append({name:"",type:"image/png",size:0,file:r,data:{isDefault:!0,popup:!1,listProps:{is_default:!0}}}),o.find(".fileuploader-menu ul a").hide().filter('[data-action="fileuploader-input"], [data-action="fileuploader-logout"]').show()},onRemove:function(t){t.name&&(t.appended||t.uploaded)&&e.post(fileUploaderCommonConfig.AjaxUrl,{action:"ulp_avatar",method:"delete",security:fileUploaderCommonConfig.Nonce,removeMeta:void 0!==t.removeMeta?1:0,file:t.name})},captions:e.extend(!0,{},e.fn.fileuploader.languages[fileUploaderCommonConfig.Locale],fileUploaderCommonConfig.avatar.captions)})}))}(jQuery);